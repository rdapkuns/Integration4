import"./modulepreload-polyfill-B5Qt9EMX.js";const Co="modulepreload",Po=function(n){return"/Integration4/"+n},rs={},ur=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let o=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=o(t.map(u=>{if(u=Po(u),u in rs)return;rs[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":Co,c||(d.as="script"),d.crossOrigin="",d.href=u,l&&d.setAttribute("nonce",l),document.head.appendChild(d),c)return new Promise((_,p)=>{d.addEventListener("load",_),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},Eo=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ur(async()=>{const{default:r}=await Promise.resolve().then(()=>Ut);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Pi extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class Oo extends Pi{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ao extends Pi{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ro extends Pi{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ii;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(ii||(ii={}));var Io=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};class $o{constructor(e,{headers:t={},customFetch:r,region:i=ii.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=Eo(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return Io(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=t;let a={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:u}).catch(p=>{throw new Oo(p)}),h=c.headers.get("x-relay-error");if(h&&h==="true")throw new Ao(c);if(!c.ok)throw new Ro(c);let d=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),_;return d==="application/json"?_=yield c.json():d==="application/octet-stream"?_=yield c.blob():d==="text/event-stream"?_=c:d==="multipart/form-data"?_=yield c.formData():_=yield c.text(),{data:_,error:null}}catch(i){return{data:null,error:i}}})}}function jo(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Lo(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var G={},ft={},_t={},pt={},gt={},mt={},Do=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Rt=Do();const Mo=Rt.fetch,Hs=Rt.fetch.bind(Rt),Js=Rt.Headers,Uo=Rt.Request,qo=Rt.Response,Ut=Object.freeze(Object.defineProperty({__proto__:null,Headers:Js,Request:Uo,Response:qo,default:Hs,fetch:Mo},Symbol.toStringTag,{value:"Module"})),Fo=Lo(Ut);var fr={},is;function Ks(){if(is)return fr;is=1,Object.defineProperty(fr,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return fr.default=n,fr}var ss;function Ys(){if(ss)return mt;ss=1;var n=mt&&mt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(mt,"__esModule",{value:!0});const e=n(Fo),t=n(Ks());class r{constructor(s){this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=s.headers,this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=s.shouldThrowOnError,this.signal=s.signal,this.isMaybeSingle=s.isMaybeSingle,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=Object.assign({},this.headers),this.headers[s]=o,this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var c,h,d;let _=null,p=null,f=null,g=u.status,y=u.statusText;if(u.ok){if(this.method!=="HEAD"){const v=await u.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?p=v:p=JSON.parse(v))}const m=(c=this.headers.Prefer)===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),w=(h=u.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");m&&w&&w.length>1&&(f=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(_={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,f=null,g=406,y="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const m=await u.text();try{_=JSON.parse(m),Array.isArray(_)&&u.status===404&&(p=[],_=null,g=200,y="OK")}catch{u.status===404&&m===""?(g=204,y="No Content"):_={message:m}}if(_&&this.isMaybeSingle&&(!((d=_==null?void 0:_.details)===null||d===void 0)&&d.includes("0 rows"))&&(_=null,g=200,y="OK"),_&&this.shouldThrowOnError)throw new t.default(_)}return{error:_,data:p,count:f,status:g,statusText:y}});return this.shouldThrowOnError||(l=l.catch(u=>{var c,h,d;return{error:{message:`${(c=u==null?void 0:u.name)!==null&&c!==void 0?c:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(h=u==null?void 0:u.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(d=u==null?void 0:u.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),l.then(s,o)}returns(){return this}overrideTypes(){return this}}return mt.default=r,mt}var ns;function Xs(){if(ns)return gt;ns=1;var n=gt&&gt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gt,"__esModule",{value:!0});const e=n(Ys());class t extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(u,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:u="text"}={}){var c;const h=[i?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),d=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${d}"; options=${h};`,u==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return gt.default=t,gt}var os;function Ei(){if(os)return pt;os=1;var n=pt&&pt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pt,"__esModule",{value:!0});const e=n(Xs());class t extends e.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const o=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${l}fts${u}.${s}`),this}match(i){return Object.entries(i).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(i,s,o){return this.url.searchParams.append(i,`not.${s}.${o}`),this}or(i,{foreignTable:s,referencedTable:o=s}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${i})`),this}filter(i,s,o){return this.url.searchParams.append(i,`${s}.${o}`),this}}return pt.default=t,pt}var as;function Qs(){if(as)return _t;as=1;var n=_t&&_t.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_t,"__esModule",{value:!0});const e=n(Ei());class t{constructor(i,{headers:s={},schema:o,fetch:a}){this.url=i,this.headers=s,this.schema=o,this.fetch=a}select(i,{head:s=!1,count:o}={}){const a=s?"HEAD":"GET";let l=!1;const u=(i??"*").split("").map(c=>/\s/.test(c)&&!l?"":(c==='"'&&(l=!l),c)).join("");return this.url.searchParams.set("select",u),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:s,defaultToNull:o=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(i)){const u=i.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(u.length>0){const c=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){const u="POST",c=[`resolution=${o?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),l||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(i)){const h=i.reduce((d,_)=>d.concat(Object.keys(_)),[]);if(h.length>0){const d=[...new Set(h)].map(_=>`"${_}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:s}={}){const o="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),this.headers.Prefer=a.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const s="DELETE",o=[];return i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return _t.default=t,_t}var Bt={},Nt={},ls;function Bo(){return ls||(ls=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.version=void 0,Nt.version="0.0.0-automated"),Nt}var us;function No(){if(us)return Bt;us=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.DEFAULT_HEADERS=void 0;const n=Bo();return Bt.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},Bt}var cs;function zo(){if(cs)return ft;cs=1;var n=ft&&ft.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ft,"__esModule",{value:!0});const e=n(Qs()),t=n(Ei()),r=No();class i{constructor(o,{headers:a={},schema:l,fetch:u}={}){this.url=o,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=u}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new i(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:u=!1,count:c}={}){let h;const d=new URL(`${this.url}/rpc/${o}`);let _;l||u?(h=l?"HEAD":"GET",Object.entries(a).filter(([f,g])=>g!==void 0).map(([f,g])=>[f,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([f,g])=>{d.searchParams.append(f,g)})):(h="POST",_=a);const p=Object.assign({},this.headers);return c&&(p.Prefer=`count=${c}`),new t.default({method:h,url:d,headers:p,schema:this.schemaName,body:_,fetch:this.fetch,allowEmpty:!1})}}return ft.default=i,ft}var hs;function Vo(){if(hs)return G;hs=1;var n=G&&G.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(G,"__esModule",{value:!0}),G.PostgrestError=G.PostgrestBuilder=G.PostgrestTransformBuilder=G.PostgrestFilterBuilder=G.PostgrestQueryBuilder=G.PostgrestClient=void 0;const e=n(zo());G.PostgrestClient=e.default;const t=n(Qs());G.PostgrestQueryBuilder=t.default;const r=n(Ei());G.PostgrestFilterBuilder=r.default;const i=n(Xs());G.PostgrestTransformBuilder=i.default;const s=n(Ys());G.PostgrestBuilder=s.default;const o=n(Ks());return G.PostgrestError=o.default,G.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:o.default},G}var Wo=Vo();const Go=jo(Wo),{PostgrestClient:Ho,PostgrestQueryBuilder:uc,PostgrestFilterBuilder:cc,PostgrestTransformBuilder:hc,PostgrestBuilder:dc,PostgrestError:fc}=Go;let si;typeof window>"u"?si=require("ws"):si=window.WebSocket;const Jo="2.11.10",Ko={"X-Client-Info":`realtime-js/${Jo}`},Yo="1.0.0",Zs=1e4,Xo=1e3;var Pt;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Pt||(Pt={}));var Z;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Z||(Z={}));var we;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(we||(we={}));var ni;(function(n){n.websocket="websocket"})(ni||(ni={}));var rt;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(rt||(rt={}));class Qo{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class en{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var j;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(j||(j={}));const ds=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=Zo(o,n,e,i),s),{})},Zo=(n,e,t,r)=>{const i=e.find(a=>a.name===n),s=i==null?void 0:i.type,o=t[n];return s&&!r.includes(s)?tn(s,o):oi(o)},tn=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return ia(e,t)}switch(n){case j.bool:return ea(e);case j.float4:case j.float8:case j.int2:case j.int4:case j.int8:case j.numeric:case j.oid:return ta(e);case j.json:case j.jsonb:return ra(e);case j.timestamp:return sa(e);case j.abstime:case j.date:case j.daterange:case j.int4range:case j.int8range:case j.money:case j.reltime:case j.text:case j.time:case j.timestamptz:case j.timetz:case j.tsrange:case j.tstzrange:return oi(e);default:return oi(e)}},oi=n=>n,ea=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},ta=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},ra=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},ia=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>tn(e,a))}return n},sa=n=>typeof n=="string"?n.replace(" ","T"):n,rn=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Nr{constructor(e,t,r={},i=Zs){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var fs;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(fs||(fs={}));class Jt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Jt.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Jt.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Jt.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const h=s[u];if(h){const d=c.map(g=>g.presence_ref),_=h.map(g=>g.presence_ref),p=c.filter(g=>_.indexOf(g.presence_ref)<0),f=h.filter(g=>d.indexOf(g.presence_ref)<0);p.length>0&&(a[u]=p),f.length>0&&(l[u]=f)}else a[u]=c}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const h=e[a].map(_=>_.presence_ref),d=c.filter(_=>h.indexOf(_.presence_ref)<0);e[a].unshift(...d)}r(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),e[a]=u,i(a,u,l),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _s;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(_s||(_s={}));var ps;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(ps||(ps={}));var Ee;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Ee||(Ee={}));class Oi{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Z.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Nr(this,we.join,this.params,this.timeout),this.rejoinTimer=new en(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Z.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Z.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Z.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Z.errored,this.rejoinTimer.scheduleTimeout())}),this._on(we.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Jt(this),this.broadcastEndpointURL=rn(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(c=>e==null?void 0:e(Ee.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(Ee.CLOSED));const l={},u={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:c})=>{var h;if(this.socket.setAuth(),c===void 0){e==null||e(Ee.SUBSCRIBED);return}else{const d=this.bindings.postgres_changes,_=(h=d==null?void 0:d.length)!==null&&h!==void 0?h:0,p=[];for(let f=0;f<_;f++){const g=d[f],{filter:{event:y,schema:b,table:m,filter:w}}=g,v=c&&c[f];if(v&&v.event===y&&v.schema===b&&v.table===m&&v.filter===w)p.push(Object.assign(Object.assign({},g),{id:v.id}));else{this.unsubscribe(),this.state=Z.errored,e==null||e(Ee.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(Ee.SUBSCRIBED);return}}).receive("error",c=>{this.state=Z.errored,e==null||e(Ee.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ee.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Z.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(we.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const i=new Nr(this,we.leave,{},e);i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Nr(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=we;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let d=this._onMessage(o,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(_=>{var p,f,g;return((p=_.filter)===null||p===void 0?void 0:p.event)==="*"||((g=(f=_.filter)===null||f===void 0?void 0:f.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(_=>_.callback(d,r)):(s=this.bindings[o])===null||s===void 0||s.filter(_=>{var p,f,g,y,b,m;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in _){const w=_.id,v=(p=_.filter)===null||p===void 0?void 0:p.event;return w&&((f=t.ids)===null||f===void 0?void 0:f.includes(w))&&(v==="*"||(v==null?void 0:v.toLocaleLowerCase())===((g=t.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const w=(b=(y=_==null?void 0:_.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return w==="*"||w===((m=t==null?void 0:t.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===o}).map(_=>{if(typeof d=="object"&&"ids"in d){const p=d.data,{schema:f,table:g,commit_timestamp:y,type:b,errors:m}=p;d=Object.assign(Object.assign({},{schema:f,table:g,commit_timestamp:y,eventType:b,new:{},old:{},errors:m}),this._getPayloadRecords(p))}_.callback(d,r)})}_isClosed(){return this.state===Z.closed}_isJoined(){return this.state===Z.joined}_isJoining(){return this.state===Z.joining}_isLeaving(){return this.state===Z.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Oi.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(we.close,{},e)}_onError(e){this._on(we.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Z.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=ds(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=ds(e.columns,e.old_record)),t}}const gs=()=>{},na=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class oa{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Ko,this.params={},this.timeout=Zs,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=gs,this.ref=0,this.logger=gs,this.conn=null,this.sendBuffer=[],this.serializer=new Qo,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>ur(async()=>{const{default:l}=await Promise.resolve().then(()=>Ut);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${ni.websocket}`,this.httpEndpoint=rn(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new en(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=si),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new aa(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Yo}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels=this.channels.filter(r=>r._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Pt.connecting:return rt.Connecting;case Pt.open:return rt.Open;case Pt.closing:return rt.Closing;default:return rt.Closed}}isConnected(){return this.connectionState()===rt.Open}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new Oi(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{t&&r.updateJoinPayload({access_token:t,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(we.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Xo,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:s,ref:o}=t;r==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(we.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([na],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class aa{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Pt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Ai extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function H(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class la extends Ai{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ai extends Ai{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var ua=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const sn=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ur(async()=>{const{default:r}=await Promise.resolve().then(()=>Ut);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},ca=()=>ua(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ur(()=>Promise.resolve().then(()=>Ut),void 0)).Response:Response}),li=n=>{if(Array.isArray(n))return n.map(t=>li(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=li(r)}),e};var ht=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const zr=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),ha=(n,e,t)=>ht(void 0,void 0,void 0,function*(){const r=yield ca();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(i=>{e(new la(zr(i),n.status||500))}).catch(i=>{e(new ai(zr(i),i))}):e(new ai(zr(n),n))}),da=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),t))};function cr(n,e,t,r,i,s){return ht(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,da(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>ha(l,a,r))})})}function Pr(n,e,t,r){return ht(this,void 0,void 0,function*(){return cr(n,"GET",e,t,r)})}function De(n,e,t,r,i){return ht(this,void 0,void 0,function*(){return cr(n,"POST",e,r,i,t)})}function fa(n,e,t,r,i){return ht(this,void 0,void 0,function*(){return cr(n,"PUT",e,r,i,t)})}function _a(n,e,t,r){return ht(this,void 0,void 0,function*(){return cr(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function nn(n,e,t,r,i){return ht(this,void 0,void 0,function*(){return cr(n,"DELETE",e,r,i,t)})}var te=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const pa={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ms={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ga{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=sn(i)}uploadOrUpdate(e,t,r,i){return te(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},ms),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(t),c=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),d=yield h.json();return h.ok?{data:{path:u,id:d.Id,fullPath:d.Key},error:null}:{data:null,error:d}}catch(s){if(H(s))return{data:null,error:s};throw s}})}upload(e,t,r){return te(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return te(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:ms.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:c}),d=yield h.json();return h.ok?{data:{path:s,fullPath:d.Key},error:null}:{data:null,error:d}}catch(l){if(H(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return te(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const s=yield De(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new Ai("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}})}update(e,t,r){return te(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return te(this,void 0,void 0,function*(){try{return{data:yield De(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(H(i))return{data:null,error:i};throw i}})}copy(e,t,r){return te(this,void 0,void 0,function*(){try{return{data:{path:(yield De(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(H(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return te(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield De(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(H(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return te(this,void 0,void 0,function*(){try{const i=yield De(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(H(i))return{data:null,error:i};throw i}})}download(e,t){return te(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Pr(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(H(a))return{data:null,error:a};throw a}})}info(e){return te(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Pr(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:li(r),error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}})}exists(e){return te(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield _a(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(H(r)&&r instanceof ai){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return te(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}list(e,t,r){return te(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},pa),t),{prefix:e||""});return{data:yield De(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(H(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const ma="2.7.1",va={"X-Client-Info":`storage-js/${ma}`};var vt=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};class ya{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},va),t),this.fetch=sn(r)}listBuckets(){return vt(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(H(e))return{data:null,error:e};throw e}})}getBucket(e){return vt(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return vt(this,void 0,void 0,function*(){try{return{data:yield De(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return vt(this,void 0,void 0,function*(){try{return{data:yield fa(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}})}emptyBucket(e){return vt(this,void 0,void 0,function*(){try{return{data:yield De(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}deleteBucket(e){return vt(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}}class wa extends ya{constructor(e,t={},r){super(e,t,r)}from(e){return new ga(this.url,this.headers,e,this.fetch)}}const ba="2.50.0";let Vt="";typeof Deno<"u"?Vt="deno":typeof document<"u"?Vt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Vt="react-native":Vt="node";const ka={"X-Client-Info":`supabase-js-${Vt}/${ba}`},Ta={headers:ka},Sa={schema:"public"},xa={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ca={};var Pa=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const Ea=n=>{let e;return n?e=n:typeof fetch>"u"?e=Hs:e=fetch,(...t)=>e(...t)},Oa=()=>typeof Headers>"u"?Js:Headers,Aa=(n,e,t)=>{const r=Ea(t),i=Oa();return(s,o)=>Pa(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:u}))})};var Ra=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};function Ia(n){return n.endsWith("/")?n:n+"/"}function $a(n,e){var t,r;const{db:i,auth:s,realtime:o,global:a}=n,{db:l,auth:u,realtime:c,global:h}=e,d={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},c),o),global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(t=h==null?void 0:h.headers)!==null&&t!==void 0?t:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Ra(this,void 0,void 0,function*(){return""})};return n.accessToken?d.accessToken=n.accessToken:delete d.accessToken,d}const on="2.70.0",Tt=30*1e3,ui=3,Vr=ui*Tt,ja="http://localhost:9999",La="supabase.auth.token",Da={"X-Client-Info":`gotrue-js/${on}`},ci="X-Supabase-Api-Version",an={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ma=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ua=6e5;class Ri extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function C(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class qa extends Ri{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function Fa(n){return C(n)&&n.name==="AuthApiError"}class ln extends Ri{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class He extends Ri{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class Le extends He{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ba(n){return C(n)&&n.name==="AuthSessionMissingError"}class _r extends He{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pr extends He{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class gr extends He{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Na(n){return C(n)&&n.name==="AuthImplicitGrantRedirectError"}class vs extends He{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class hi extends He{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Wr(n){return C(n)&&n.name==="AuthRetryableFetchError"}class ys extends He{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Kt extends He{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Er="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ws=` 	
\r=`.split(""),za=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<ws.length;e+=1)n[ws[e].charCodeAt(0)]=-2;for(let e=0;e<Er.length;e+=1)n[Er[e].charCodeAt(0)]=e;return n})();function bs(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Er[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Er[r]),e.queuedBits-=6}}function un(n,e,t){const r=za[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function ks(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{Ga(o,r,t)};for(let o=0;o<n.length;o+=1)un(n.charCodeAt(o),i,s);return e.join("")}function Va(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function Wa(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}Va(r,e)}}function Ga(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Ha(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)un(n.charCodeAt(i),t,r);return new Uint8Array(e)}function Ja(n){const e=[];return Wa(n,t=>e.push(t)),new Uint8Array(e)}function Ka(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>bs(i,t,r)),bs(null,t,r),e.join("")}function Ya(n){return Math.round(Date.now()/1e3)+n}function Xa(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const ye=()=>typeof window<"u"&&typeof document<"u",Xe={tested:!1,writable:!1},Yt=()=>{if(!ye())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xe.tested)return Xe.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Xe.tested=!0,Xe.writable=!0}catch{Xe.tested=!0,Xe.writable=!1}return Xe.writable};function Qa(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const cn=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ur(async()=>{const{default:r}=await Promise.resolve().then(()=>Ut);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Za=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",hn=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},mr=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},vr=async(n,e)=>{await n.removeItem(e)};class Mr{constructor(){this.promise=new Mr.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Mr.promiseConstructor=Promise;function Gr(n){const e=n.split(".");if(e.length!==3)throw new Kt("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Ma.test(e[r]))throw new Kt("JWT not in base64url format");return{header:JSON.parse(ks(e[0])),payload:JSON.parse(ks(e[1])),signature:Ha(e[2]),raw:{header:e[0],payload:e[1]}}}async function el(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function tl(n,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await n(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function rl(n){return("0"+n.toString(16)).substr(-2)}function il(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,rl).join("")}async function sl(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function nl(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await sl(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yt(n,e,t=!1){const r=il();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await hn(n,`${e}-code-verifier`,i);const s=await nl(r);return[s,r===s?"plain":"s256"]}const ol=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function al(n){const e=n.headers.get(ci);if(!e||!e.match(ol))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function ll(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function ul(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const cl=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wt(n){if(!cl.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var hl=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const et=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),dl=[502,503,504];async function Ts(n){var e;if(!Za(n))throw new hi(et(n),0);if(dl.includes(n.status))throw new hi(et(n),n.status);let t;try{t=await n.json()}catch(s){throw new ln(et(s),s)}let r;const i=al(n);if(i&&i.getTime()>=an["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new ys(et(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Le}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new ys(et(t),n.status,t.weak_password.reasons);throw new qa(et(t),n.status||500,r)}const fl=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function P(n,e,t,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[ci]||(s[ci]=an["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await _l(n,e,t+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function _l(n,e,t,r,i,s){const o=fl(e,r,i,s);let a;try{a=await n(t,Object.assign({},o))}catch(l){throw console.error(l),new hi(et(l),0)}if(a.ok||await Ts(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Ts(l)}}function Pe(n){var e;let t=null;vl(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=Ya(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Ss(n){const e=Pe(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Me(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function pl(n){return{data:n,error:null}}function gl(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,o=hl(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function ml(n){return n}function vl(n){return n.access_token&&n.refresh_token&&n.expires_in}const Hr=["global","local","others"];var yl=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class wl{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=cn(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Hr[0]){if(Hr.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Hr.join(", ")}`);try{return await P(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(C(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await P(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Me})}catch(r){if(C(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=yl(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await P(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:gl,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(C(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await P(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Me})}catch(t){if(C(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await P(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:ml});if(c.error)throw c.error;const h=await c.json(),d=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,_=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return _.length>0&&(_.forEach(p=>{const f=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(p.split(";")[1].split("=")[1]);u[`${g}Page`]=f}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(C(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){wt(e);try{return await P(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Me})}catch(t){if(C(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){wt(e);try{return await P(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Me})}catch(r){if(C(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){wt(e);try{return await P(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Me})}catch(r){if(C(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){wt(e.userId);try{const{data:t,error:r}=await P(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(C(t))return{data:null,error:t};throw t}}async _deleteFactor(e){wt(e.userId),wt(e.id);try{return{data:await P(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(C(t))return{data:null,error:t};throw t}}}const bl={getItem:n=>Yt()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{Yt()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{Yt()&&globalThis.localStorage.removeItem(n)}};function xs(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function kl(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const bt={debug:!!(globalThis&&Yt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class dn extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Tl extends dn{}async function Sl(n,e,t){bt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),bt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){bt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{bt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw bt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Tl(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(bt.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}kl();const xl={url:ja,storageKey:La,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Da,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Cs(n,e,t){return await t()}class tr{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=tr.nextInstanceID,tr.nextInstanceID+=1,this.instanceID>0&&ye()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},xl),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new wl({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=cn(i.fetch),this.lock=i.lock||Cs,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:ye()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Sl:this.lock=Cs,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Yt()?this.storage=bl:(this.memoryStorage={},this.storage=xs(this.memoryStorage)):(this.memoryStorage={},this.storage=xs(this.memoryStorage)),ye()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${on}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Qa(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),ye()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Na(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return C(t)?{error:t}:{error:new ln("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const s=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Pe}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(C(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,r,i;try{let s;if("email"in e){const{email:c,password:h,options:d}=e;let _=null,p=null;this.flowType==="pkce"&&([_,p]=await yt(this.storage,this.storageKey)),s=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:c,password:h,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:_,code_challenge_method:p},xform:Pe})}else if("phone"in e){const{phone:c,password:h,options:d}=e;s=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},channel:(i=d==null?void 0:d.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Pe})}else throw new pr("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(C(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:o,options:a}=e;t=await P(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ss})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=await P(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ss})}else throw new pr("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new _r}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,i,s,o,a,l,u,c,h,d,_;let p,f;if("message"in e)p=e.message,f=e.signature;else{const{chain:g,wallet:y,statement:b,options:m}=e;let w;if(ye())if(typeof y=="object")w=y;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))w=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=y}const v=new URL((t=m==null?void 0:m.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in w&&w.signIn){const k=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),b?{statement:b}:null));let T;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")T=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)T=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)p=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),f=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${v.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${v.href}`,`Issued At: ${(i=(r=m==null?void 0:m.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=m==null?void 0:m.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((o=m==null?void 0:m.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((a=m==null?void 0:m.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((u=m==null?void 0:m.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((h=(c=m==null?void 0:m.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||h===void 0)&&h.length?["Resources",...m.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const k=await w.signMessage(new TextEncoder().encode(p),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=k}}try{const{data:g,error:y}=await P(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Ka(f)},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Pe});if(y)throw y;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new _r}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:y})}catch(g){if(C(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const t=await mr(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:s,error:o}=await P(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Pe});if(await vr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new _r}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(C(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:s,nonce:o}=e,a=await P(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Pe}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new _r}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await yt(this.storage,this.storageKey));const{error:h}=await P(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await P(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new pr("You must provide either an email or phone number.")}catch(a){if(C(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await P(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Pe});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(C(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await yt(this.storage,this.storageKey)),await P(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:pl})}catch(s){if(C(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Le;const{error:i}=await P(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(C(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await P(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await P(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new pr("You must provide either an email or phone number and a type")}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await mr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Vr:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await P(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Me}):await this._useSession(async t=>{var r,i,s;const{data:o,error:a}=t;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Le}:await P(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Me})})}catch(t){if(C(t))return Ba(t)&&(await this._removeSession(),await vr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Le;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await yt(this.storage,this.storageKey));const{data:u,error:c}=await P(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Me});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(C(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Le;const t=Date.now()/1e3;let r=t,i=!0,s=null;const{payload:o}=Gr(e.access_token);if(o.exp&&(r=o.exp,i=r<=t),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(C(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Le;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ye())throw new gr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new gr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new vs("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new gr("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new vs("No code detected.");const{data:b,error:m}=await this._exchangeCodeForSession(e.code);if(m)throw m;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!s||!a||!o||!u)throw new gr("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(a);let d=c+h;l&&(d=parseInt(l));const _=d-c;_*1e3<=Tt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${h}s`);const p=d-h;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,d,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,d,c);const{data:f,error:g}=await this._getUser(s);if(g)throw g;const y={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:h,expires_at:d,refresh_token:o,token_type:u,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(r){if(C(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await mr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Fa(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await vr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Xa(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:s},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await yt(this.storage,this.storageKey,!0));try{return await P(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(C(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(C(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,u,c;const{data:h,error:d}=s;if(d)throw d;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await P(this.fetch,"GET",_,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return ye()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(C(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)throw o;return await P(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(C(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await tl(async i=>(i>0&&await el(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await P(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Pe})),(i,s)=>{const o=200*Math.pow(2,i);return s&&Wr(s)&&Date.now()+o-r<Tt})}catch(r){if(this._debug(t,"error",r),C(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),ye()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await mr(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Vr;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${Vr}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:s}=await this._callRefreshToken(r.refresh_token);s&&(console.error(s),Wr(s)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Le;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Mr;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Le;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),C(s)){const o={session:null,error:s};return Wr(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await hn(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await vr(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ye()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Tt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Tt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Tt}ms, refresh threshold is ${ui} ticks`),i<=ui&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof dn)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ye()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await yt(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await P(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(C(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await P(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(C(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:o,error:a}=await P(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(C(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await P(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(C(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Gr(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+Ua>Date.now()))return r;const{data:i,error:s}=await P(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!i.keys||i.keys.length===0)throw new Kt("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),r=i.keys.find(o=>o.kid===e),!r)throw new Kt("No matching signing key found in JWKS");return r}async getClaims(e,t={keys:[]}){try{let r=e;if(!r){const{data:_,error:p}=await this.getSession();if(p||!_.session)return{data:null,error:p};r=_.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=Gr(r);if(ll(s.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:_}=await this.getUser(r);if(_)throw _;return{data:{claims:s,header:i,signature:o},error:null}}const u=ul(i.alg),c=await this.fetchJwk(i.kid,t),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,Ja(`${a}.${l}`)))throw new Kt("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(C(r))return{data:null,error:r};throw r}}}tr.nextInstanceID=0;const Cl=tr;class Pl extends Cl{constructor(e){super(e)}}var El=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};class Ol{constructor(e,t,r){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=Ia(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:Sa,realtime:Ca,auth:Object.assign(Object.assign({},xa),{storageKey:u}),global:Ta},h=$a(r??{},c);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=h.global.headers)!==null&&s!==void 0?s:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(d,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=Aa(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Ho(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new $o(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new wa(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return El(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,lock:a,debug:l},u,c){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Pl({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:o,lock:a,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new oa(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Al=(n,e,t)=>new Ol(n,e,t),Rl="https://qhfzxdchxbpkaqneavte.supabase.co",Il="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFoZnp4ZGNoeGJwa2FxbmVhdnRlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk2MzM3MjksImV4cCI6MjA2NTIwOTcyOX0.skkK5t2d-xyG2TzTguXfH22sVg2rBx8iQTttBsAQ888",fn=Al(Rl,Il),Ps=[{id:1,location:"L",title:"Welcome to the Living room",body:"We have the living room, where I toss down my groceries, plop myself anywhere, and honestly just exist."},{id:2,location:"S",title:"New Bench",body:"I thought it was a fancy bench. Turns out... oops- it was part of the exhibit. Sorry, artist-friend."},{id:3,location:"S",title:"Sketchy Business",body:"I once drew on the museum wall by accident. I thought it was a whiteboard. Now its officially called Abbys First Mural "},{id:4,location:"S",title:"Folded Masterpiece",body:"I once framed a napkin. It had a coffee stain that looked like a horse. Or a croissant. Either way, its in my hallway as Untitled #1."},{id:5,location:"C",title:"Talk Thirsty to Me",body:"I once adopted a plant for company. I talked to it so much I forgot to water it."},{id:6,location:"C",title:"Flour Power",body:"I brought a to-do list, but ended up following my cravings instead. Thats how I discovered midnight pancake therapy."},{id:7,location:"C",title:"Smells like trouble",body:"I once lit five candles to feel calm then panicked , I thought  something burning"},{id:8,location:"G",title:"The Outfit Plot Twist",body:"Once I only wore serious adult clothes. Now I own pants with ducks on them. The glow-up is real."},{id:9,location:"G",title:"The Origam-me Phase",body:"Old me was trying so hard to fit in, I forgot how weird I actually am. Now I fold paper creatures at parties."},{id:10,location:"G",title:"The Dirt Talk",body:"I once came in the garden to think and ended up talking to a worm."},{id:11,location:"A",title:"Exhibit A(bby)",body:"My favourite game... pretending Im a sculpture when visitors walk by. Ive never broken character. ...Except for sneezes."},{id:12,location:"A",title:"Dust Me?",body:"I tried to gamify cleaning by pretending the dust was historic. Turns out, it actually was from 1870."},{id:13,location:"A",title:"Sockrifice",body:"I once invented a game where the loser had to fold socks. I lost. On purpose. I like folding socks."},{id:14,location:"F",title:"Final Step",body:"When I first arrived, I didnt know what to grow. So I planted a wish... Now its your turn"}];function Oe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _n(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var he={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},It={duration:.5,overwrite:!1,delay:0},Ii,Y,D,pe=1e8,R=1/pe,di=Math.PI*2,$l=di/4,jl=0,pn=Math.sqrt,Ll=Math.cos,Dl=Math.sin,J=function(e){return typeof e=="string"},q=function(e){return typeof e=="function"},$e=function(e){return typeof e=="number"},$i=function(e){return typeof e>"u"},xe=function(e){return typeof e=="object"},re=function(e){return e!==!1},ji=function(){return typeof window<"u"},yr=function(e){return q(e)||J(e)},gn=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Q=Array.isArray,fi=/(?:-?\.?\d|\.)+/gi,mn=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,xt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Jr=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,vn=/[+-]=-?[.\d]+/,yn=/[^,'"\[\]\s]+/gi,Ml=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,M,be,_i,Li,de={},Or={},wn,bn=function(e){return(Or=$t(e,de))&&oe},Di=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},rr=function(e,t){return!t&&console.warn(e)},kn=function(e,t){return e&&(de[e]=t)&&Or&&(Or[e]=t)||de},ir=function(){return 0},Ul={suppressEvents:!0,isStart:!0,kill:!1},br={suppressEvents:!0,kill:!1},ql={suppressEvents:!0},Mi={},Ne=[],pi={},Tn,le={},Kr={},Es=30,kr=[],Ui="",qi=function(e){var t=e[0],r,i;if(xe(t)||q(t)||(e=[e]),!(r=(t._gsap||{}).harness)){for(i=kr.length;i--&&!kr[i].targetTest(t););r=kr[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new Hn(e[i],r)))||e.splice(i,1);return e},st=function(e){return e._gsap||qi(ge(e))[0]._gsap},Sn=function(e,t,r){return(r=e[t])&&q(r)?e[t]():$i(r)&&e.getAttribute&&e.getAttribute(t)||r},ie=function(e,t){return(e=e.split(",")).forEach(t)||e},F=function(e){return Math.round(e*1e5)/1e5||0},z=function(e){return Math.round(e*1e7)/1e7||0},Et=function(e,t){var r=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),r==="+"?e+i:r==="-"?e-i:r==="*"?e*i:e/i},Fl=function(e,t){for(var r=t.length,i=0;e.indexOf(t[i])<0&&++i<r;);return i<r},Ar=function(){var e=Ne.length,t=Ne.slice(0),r,i;for(pi={},Ne.length=0,r=0;r<e;r++)i=t[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},Fi=function(e){return!!(e._initted||e._startAt||e.add)},xn=function(e,t,r,i){Ne.length&&!Y&&Ar(),e.render(t,r,!!(Y&&t<0&&Fi(e))),Ne.length&&!Y&&Ar()},Cn=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(yn).length<2?t:J(e)?e.trim():e},Pn=function(e){return e},fe=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},Bl=function(e){return function(t,r){for(var i in r)i in t||i==="duration"&&e||i==="ease"||(t[i]=r[i])}},$t=function(e,t){for(var r in t)e[r]=t[r];return e},Os=function n(e,t){for(var r in t)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=xe(t[r])?n(e[r]||(e[r]={}),t[r]):t[r]);return e},Rr=function(e,t){var r={},i;for(i in e)i in t||(r[i]=e[i]);return r},Xt=function(e){var t=e.parent||M,r=e.keyframes?Bl(Q(e.keyframes)):fe;if(re(e.inherit))for(;t;)r(e,t.vars.defaults),t=t.parent||t._dp;return e},Nl=function(e,t){for(var r=e.length,i=r===t.length;i&&r--&&e[r]===t[r];);return r<0},En=function(e,t,r,i,s){var o=e[i],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[i]=t,t._prev=o,t.parent=t._dp=e,t},Ur=function(e,t,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var s=t._prev,o=t._next;s?s._next=o:e[r]===t&&(e[r]=o),o?o._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},Ve=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},nt=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},zl=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},gi=function(e,t,r,i){return e._startAt&&(Y?e._startAt.revert(br):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},Vl=function n(e){return!e||e._ts&&n(e.parent)},As=function(e){return e._repeat?jt(e._tTime,e=e.duration()+e._rDelay)*e:0},jt=function(e,t){var r=Math.floor(e=z(e/t));return e&&r===e?r-1:r},Ir=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},qr=function(e){return e._end=z(e._start+(e._tDur/Math.abs(e._ts||e._rts||R)||0))},Fr=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=z(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),qr(e),r._dirty||nt(r,e)),e},On=function(e,t){var r;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(r=Ir(e.rawTime(),t),(!t._dur||hr(0,t.totalDuration(),r)-t._tTime>R)&&t.render(r,!0)),nt(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-R}},ke=function(e,t,r,i){return t.parent&&Ve(t),t._start=z(($e(r)?r:r||e!==M?_e(e,r,t):e._time)+t._delay),t._end=z(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),En(e,t,"_first","_last",e._sort?"_start":0),mi(t)||(e._recent=t),i||On(e,t),e._ts<0&&Fr(e,e._tTime),e},An=function(e,t){return(de.ScrollTrigger||Di("scrollTrigger",t))&&de.ScrollTrigger.create(t,e)},Rn=function(e,t,r,i,s){if(Ni(e,t,s),!e._initted)return 1;if(!r&&e._pt&&!Y&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&Tn!==ue.frame)return Ne.push(e),e._lazy=[s,i],1},Wl=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},mi=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},Gl=function(e,t,r,i){var s=e.ratio,o=t<0||!t&&(!e._start&&Wl(e)&&!(!e._initted&&mi(e))||(e._ts<0||e._dp._ts<0)&&!mi(e))?0:1,a=e._rDelay,l=0,u,c,h;if(a&&e._repeat&&(l=hr(0,e._tDur,t),c=jt(l,a),e._yoyo&&c&1&&(o=1-o),c!==jt(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||Y||i||e._zTime===R||!t&&e._zTime){if(!e._initted&&Rn(e,t,i,r,l))return;for(h=e._zTime,e._zTime=t||(r?R:0),r||(r=t&&!h),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,u=e._pt;u;)u.r(o,u.d),u=u._next;t<0&&gi(e,t,r,!0),e._onUpdate&&!r&&ce(e,"onUpdate"),l&&e._repeat&&!r&&e.parent&&ce(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Ve(e,1),!r&&!Y&&(ce(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},Hl=function(e,t,r){var i;if(r>t)for(i=e._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},Lt=function(e,t,r,i){var s=e._repeat,o=z(t)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:z(o*(s+1)+e._rDelay*s):o,a>0&&!i&&Fr(e,e._tTime=e._tDur*a),e.parent&&qr(e),r||nt(e.parent,e),e},Rs=function(e){return e instanceof ee?nt(e):Lt(e,e._dur)},Jl={_start:0,endTime:ir,totalDuration:ir},_e=function n(e,t,r){var i=e.labels,s=e._recent||Jl,o=e.duration()>=pe?s.endTime(!1):e._dur,a,l,u;return J(t)&&(isNaN(t)||t in i)?(l=t.charAt(0),u=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(u?(a<0?s:r).totalDuration()/100:1)):a<0?(t in i||(i[t]=o),i[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),u&&r&&(l=l/100*(Q(r)?r[0]:r).totalDuration()),a>1?n(e,t.substr(0,a-1),r)+l:o+l)):t==null?o:+t},Qt=function(e,t,r){var i=$e(t[1]),s=(i?2:1)+(e<2?0:1),o=t[s],a,l;if(i&&(o.duration=t[1]),o.parent=r,e){for(a=o,l=r;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=re(l.vars.inherit)&&l.parent;o.immediateRender=re(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new N(t[0],o,t[s+1])},Je=function(e,t){return e||e===0?t(e):t},hr=function(e,t,r){return r<e?e:r>t?t:r},X=function(e,t){return!J(e)||!(t=Ml.exec(e))?"":t[1]},Kl=function(e,t,r){return Je(r,function(i){return hr(e,t,i)})},vi=[].slice,In=function(e,t){return e&&xe(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&xe(e[0]))&&!e.nodeType&&e!==be},Yl=function(e,t,r){return r===void 0&&(r=[]),e.forEach(function(i){var s;return J(i)&&!t||In(i,1)?(s=r).push.apply(s,ge(i)):r.push(i)})||r},ge=function(e,t,r){return D&&!t&&D.selector?D.selector(e):J(e)&&!r&&(_i||!Dt())?vi.call((t||Li).querySelectorAll(e),0):Q(e)?Yl(e,r):In(e)?vi.call(e,0):e?[e]:[]},yi=function(e){return e=ge(e)[0]||rr("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return ge(t,r.querySelectorAll?r:r===e?rr("Invalid scope")||Li.createElement("div"):e)}},$n=function(e){return e.sort(function(){return .5-Math.random()})},jn=function(e){if(q(e))return e;var t=xe(e)?e:{each:e},r=ot(t.ease),i=t.from||0,s=parseFloat(t.base)||0,o={},a=i>0&&i<1,l=isNaN(i)||a,u=t.axis,c=i,h=i;return J(i)?c=h={center:.5,edges:.5,end:1}[i]||0:!a&&l&&(c=i[0],h=i[1]),function(d,_,p){var f=(p||t).length,g=o[f],y,b,m,w,v,k,T,x,S;if(!g){if(S=t.grid==="auto"?0:(t.grid||[1,pe])[1],!S){for(T=-pe;T<(T=p[S++].getBoundingClientRect().left)&&S<f;);S<f&&S--}for(g=o[f]=[],y=l?Math.min(S,f)*c-.5:i%S,b=S===pe?0:l?f*h/S-.5:i/S|0,T=0,x=pe,k=0;k<f;k++)m=k%S-y,w=b-(k/S|0),g[k]=v=u?Math.abs(u==="y"?w:m):pn(m*m+w*w),v>T&&(T=v),v<x&&(x=v);i==="random"&&$n(g),g.max=T-x,g.min=x,g.v=f=(parseFloat(t.amount)||parseFloat(t.each)*(S>f?f-1:u?u==="y"?f/S:S:Math.max(S,f/S))||0)*(i==="edges"?-1:1),g.b=f<0?s-f:s,g.u=X(t.amount||t.each)||0,r=r&&f<0?Vn(r):r}return f=(g[d]-g.min)/g.max||0,z(g.b+(r?r(f):f)*g.v)+g.u}},wi=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=z(Math.round(parseFloat(r)/e)*e*t);return(i-i%1)/t+($e(r)?0:X(r))}},Ln=function(e,t){var r=Q(e),i,s;return!r&&xe(e)&&(i=r=e.radius||pe,e.values?(e=ge(e.values),(s=!$e(e[0]))&&(i*=i)):e=wi(e.increment)),Je(t,r?q(e)?function(o){return s=e(o),Math.abs(s-o)<=i?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),u=pe,c=0,h=e.length,d,_;h--;)s?(d=e[h].x-a,_=e[h].y-l,d=d*d+_*_):d=Math.abs(e[h]-a),d<u&&(u=d,c=h);return c=!i||u<=i?e[c]:o,s||c===o||$e(o)?c:c+X(o)}:wi(e))},Dn=function(e,t,r,i){return Je(Q(e)?!t:r===!0?!!(r=0):!i,function(){return Q(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+r*.99))/r)*r*i)/i})},Xl=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){return t.reduce(function(s,o){return o(s)},i)}},Ql=function(e,t){return function(r){return e(parseFloat(r))+(t||X(r))}},Zl=function(e,t,r){return Un(e,t,0,1,r)},Mn=function(e,t,r){return Je(r,function(i){return e[~~t(i)]})},eu=function n(e,t,r){var i=t-e;return Q(e)?Mn(e,n(0,e.length),t):Je(r,function(s){return(i+(s-e)%i)%i+e})},tu=function n(e,t,r){var i=t-e,s=i*2;return Q(e)?Mn(e,n(0,e.length-1),t):Je(r,function(o){return o=(s+(o-e)%s)%s||0,e+(o>i?s-o:o)})},sr=function(e){for(var t=0,r="",i,s,o,a;~(i=e.indexOf("random(",t));)o=e.indexOf(")",i),a=e.charAt(i+7)==="[",s=e.substr(i+7,o-i-7).match(a?yn:fi),r+=e.substr(t,i-t)+Dn(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return r+e.substr(t,e.length-t)},Un=function(e,t,r,i,s){var o=t-e,a=i-r;return Je(s,function(l){return r+((l-e)/o*a||0)})},ru=function n(e,t,r,i){var s=isNaN(e+t)?0:function(_){return(1-_)*e+_*t};if(!s){var o=J(e),a={},l,u,c,h,d;if(r===!0&&(i=1)&&(r=null),o)e={p:e},t={p:t};else if(Q(e)&&!Q(t)){for(c=[],h=e.length,d=h-2,u=1;u<h;u++)c.push(n(e[u-1],e[u]));h--,s=function(p){p*=h;var f=Math.min(d,~~p);return c[f](p-f)},r=t}else i||(e=$t(Q(e)?[]:{},e));if(!c){for(l in t)Bi.call(a,e,l,"get",t[l]);s=function(p){return Wi(p,a)||(o?e.p:e)}}}return Je(r,s)},Is=function(e,t,r){var i=e.labels,s=pe,o,a,l;for(o in i)a=i[o]-t,a<0==!!r&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},ce=function(e,t,r){var i=e.vars,s=i[t],o=D,a=e._ctx,l,u,c;if(s)return l=i[t+"Params"],u=i.callbackScope||e,r&&Ne.length&&Ar(),a&&(D=a),c=l?s.apply(u,l):s.call(u),D=o,c},Wt=function(e){return Ve(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Y),e.progress()<1&&ce(e,"onInterrupt"),e},Ct,qn=[],Fn=function(e){if(e)if(e=!e.name&&e.default||e,ji()||e.headless){var t=e.name,r=q(e),i=t&&!r&&e.init?function(){this._props=[]}:e,s={init:ir,render:Wi,add:Bi,kill:vu,modifier:mu,rawVars:0},o={targetTest:0,get:0,getSetter:Vi,aliases:{},register:0};if(Dt(),e!==i){if(le[t])return;fe(i,fe(Rr(e,s),o)),$t(i.prototype,$t(s,Rr(e,o))),le[i.prop=t]=i,e.targetTest&&(kr.push(i),Mi[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}kn(t,i),e.register&&e.register(oe,i,se)}else qn.push(e)},A=255,Gt={aqua:[0,A,A],lime:[0,A,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,A],navy:[0,0,128],white:[A,A,A],olive:[128,128,0],yellow:[A,A,0],orange:[A,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[A,0,0],pink:[A,192,203],cyan:[0,A,A],transparent:[A,A,A,0]},Yr=function(e,t,r){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(r-t)*e*6:e<.5?r:e*3<2?t+(r-t)*(2/3-e)*6:t)*A+.5|0},Bn=function(e,t,r){var i=e?$e(e)?[e>>16,e>>8&A,e&A]:0:Gt.black,s,o,a,l,u,c,h,d,_,p;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Gt[e])i=Gt[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&A,i&A,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&A,e&A]}else if(e.substr(0,3)==="hsl"){if(i=p=e.match(fi),!t)l=+i[0]%360/360,u=+i[1]/100,c=+i[2]/100,o=c<=.5?c*(u+1):c+u-c*u,s=c*2-o,i.length>3&&(i[3]*=1),i[0]=Yr(l+1/3,s,o),i[1]=Yr(l,s,o),i[2]=Yr(l-1/3,s,o);else if(~e.indexOf("="))return i=e.match(mn),r&&i.length<4&&(i[3]=1),i}else i=e.match(fi)||Gt.transparent;i=i.map(Number)}return t&&!p&&(s=i[0]/A,o=i[1]/A,a=i[2]/A,h=Math.max(s,o,a),d=Math.min(s,o,a),c=(h+d)/2,h===d?l=u=0:(_=h-d,u=c>.5?_/(2-h-d):_/(h+d),l=h===s?(o-a)/_+(o<a?6:0):h===o?(a-s)/_+2:(s-o)/_+4,l*=60),i[0]=~~(l+.5),i[1]=~~(u*100+.5),i[2]=~~(c*100+.5)),r&&i.length<4&&(i[3]=1),i},Nn=function(e){var t=[],r=[],i=-1;return e.split(ze).forEach(function(s){var o=s.match(xt)||[];t.push.apply(t,o),r.push(i+=o.length+1)}),t.c=r,t},$s=function(e,t,r){var i="",s=(e+i).match(ze),o=t?"hsla(":"rgba(",a=0,l,u,c,h;if(!s)return e;if(s=s.map(function(d){return(d=Bn(d,t,1))&&o+(t?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),r&&(c=Nn(e),l=r.c,l.join(i)!==c.c.join(i)))for(u=e.replace(ze,"1").split(xt),h=u.length-1;a<h;a++)i+=u[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(c.length?c:s.length?s:r).shift());if(!u)for(u=e.split(ze),h=u.length-1;a<h;a++)i+=u[a]+s[a];return i+u[h]},ze=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Gt)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),iu=/hsl[a]?\(/,zn=function(e){var t=e.join(" "),r;if(ze.lastIndex=0,ze.test(t))return r=iu.test(t),e[1]=$s(e[1],r),e[0]=$s(e[0],r,Nn(e[1])),!0},nr,ue=function(){var n=Date.now,e=500,t=33,r=n(),i=r,s=1e3/240,o=s,a=[],l,u,c,h,d,_,p=function f(g){var y=n()-i,b=g===!0,m,w,v,k;if((y>e||y<0)&&(r+=y-t),i+=y,v=i-r,m=v-o,(m>0||b)&&(k=++h.frame,d=v-h.time*1e3,h.time=v=v/1e3,o+=m+(m>=s?4:s-m),w=1),b||(l=u(f)),w)for(_=0;_<a.length;_++)a[_](v,d,k,g)};return h={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(g){return d/(1e3/(g||60))},wake:function(){wn&&(!_i&&ji()&&(be=_i=window,Li=be.document||{},de.gsap=oe,(be.gsapVersions||(be.gsapVersions=[])).push(oe.version),bn(Or||be.GreenSockGlobals||!be.gsap&&be||{}),qn.forEach(Fn)),c=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&h.sleep(),u=c||function(g){return setTimeout(g,o-h.time*1e3+1|0)},nr=1,p(2))},sleep:function(){(c?cancelAnimationFrame:clearTimeout)(l),nr=0,u=ir},lagSmoothing:function(g,y){e=g||1/0,t=Math.min(y||33,e)},fps:function(g){s=1e3/(g||240),o=h.time*1e3+s},add:function(g,y,b){var m=y?function(w,v,k,T){g(w,v,k,T),h.remove(m)}:g;return h.remove(g),a[b?"unshift":"push"](m),Dt(),m},remove:function(g,y){~(y=a.indexOf(g))&&a.splice(y,1)&&_>=y&&_--},_listeners:a},h}(),Dt=function(){return!nr&&ue.wake()},E={},su=/^[\d.\-M][\d.\-,\s]/,nu=/["']/g,ou=function(e){for(var t={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,o=r.length,a,l,u;s<o;s++)l=r[s],a=s!==o-1?l.lastIndexOf(","):l.length,u=l.substr(0,a),t[i]=isNaN(u)?u.replace(nu,"").trim():+u,i=l.substr(a+1).trim();return t},au=function(e){var t=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<r?e.indexOf(")",r+1):r)},lu=function(e){var t=(e+"").split("("),r=E[t[0]];return r&&t.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[ou(t[1])]:au(e).split(",").map(Cn)):E._CE&&su.test(e)?E._CE("",e):r},Vn=function(e){return function(t){return 1-e(1-t)}},Wn=function n(e,t){for(var r=e._first,i;r;)r instanceof ee?n(r,t):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==t&&(r.timeline?n(r.timeline,t):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=t)),r=r._next},ot=function(e,t){return e&&(q(e)?e:E[e]||lu(e))||t},dt=function(e,t,r,i){r===void 0&&(r=function(l){return 1-t(1-l)}),i===void 0&&(i=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:r,easeInOut:i},o;return ie(e,function(a){E[a]=de[a]=s,E[o=a.toLowerCase()]=r;for(var l in s)E[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=E[a+"."+l]=s[l]}),s},Gn=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},Xr=function n(e,t,r){var i=t>=1?t:1,s=(r||(e?.3:.45))/(t<1?t:1),o=s/di*(Math.asin(1/i)||0),a=function(c){return c===1?1:i*Math.pow(2,-10*c)*Dl((c-o)*s)+1},l=e==="out"?a:e==="in"?function(u){return 1-a(1-u)}:Gn(a);return s=di/s,l.config=function(u,c){return n(e,u,c)},l},Qr=function n(e,t){t===void 0&&(t=1.70158);var r=function(o){return o?--o*o*((t+1)*o+t)+1:0},i=e==="out"?r:e==="in"?function(s){return 1-r(1-s)}:Gn(r);return i.config=function(s){return n(e,s)},i};ie("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;dt(n+",Power"+(t-1),e?function(r){return Math.pow(r,t)}:function(r){return r},function(r){return 1-Math.pow(1-r,t)},function(r){return r<.5?Math.pow(r*2,t)/2:1-Math.pow((1-r)*2,t)/2})});E.Linear.easeNone=E.none=E.Linear.easeIn;dt("Elastic",Xr("in"),Xr("out"),Xr());(function(n,e){var t=1/e,r=2*t,i=2.5*t,s=function(a){return a<t?n*a*a:a<r?n*Math.pow(a-1.5/e,2)+.75:a<i?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};dt("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);dt("Expo",function(n){return Math.pow(2,10*(n-1))*n+n*n*n*n*n*n*(1-n)});dt("Circ",function(n){return-(pn(1-n*n)-1)});dt("Sine",function(n){return n===1?1:-Ll(n*$l)+1});dt("Back",Qr("in"),Qr("out"),Qr());E.SteppedEase=E.steps=de.SteppedEase={config:function(e,t){e===void 0&&(e=1);var r=1/e,i=e+(t?0:1),s=t?1:0,o=1-R;return function(a){return((i*hr(0,o,a)|0)+s)*r}}};It.ease=E["quad.out"];ie("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return Ui+=n+","+n+"Params,"});var Hn=function(e,t){this.id=jl++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:Sn,this.set=t?t.getSetter:Vi},or=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Lt(this,+t.duration,1,1),this.data=t.data,D&&(this._ctx=D,D.data.push(this)),nr||ue.wake()}var e=n.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,Lt(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(Dt(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Fr(this,r),!s._dp||s.parent||On(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&ke(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===R||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),xn(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+As(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+As(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?jt(this._tTime,s)+1:1},e.timeScale=function(r,i){if(!arguments.length)return this._rts===-R?0:this._rts;if(this._rts===r)return this;var s=this.parent&&this._ts?Ir(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-R?0:this._rts,this.totalTime(hr(-Math.abs(this._delay),this.totalDuration(),s),i!==!1),qr(this),zl(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Dt(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==R&&(this._tTime-=R)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&ke(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(re(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ir(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=ql);var i=Y;return Y=r,Fi(this)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),Y=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,Rs(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,Rs(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(_e(this,r),re(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,re(i)),this._dur||(this._zTime=-R),this},e.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-R:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-R,this},e.isActive=function(){var r=this.parent||this._dp,i=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-R)},e.eventCallback=function(r,i,s){var o=this.vars;return arguments.length>1?(i?(o[r]=i,s&&(o[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=i)):delete o[r],this):o[r]},e.then=function(r){var i=this;return new Promise(function(s){var o=q(r)?r:Pn,a=function(){var u=i.then;i.then=null,q(o)&&(o=o(i))&&(o.then||o===i)&&(i.then=u),s(o),i.then=u};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?a():i._prom=a})},e.kill=function(){Wt(this)},n}();fe(or.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-R,_prom:0,_ps:!1,_rts:1});var ee=function(n){_n(e,n);function e(r,i){var s;return r===void 0&&(r={}),s=n.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=re(r.sortChildren),M&&ke(r.parent||M,Oe(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&An(Oe(s),r.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,o){return Qt(0,arguments,this),this},t.from=function(i,s,o){return Qt(1,arguments,this),this},t.fromTo=function(i,s,o,a){return Qt(2,arguments,this),this},t.set=function(i,s,o){return s.duration=0,s.parent=this,Xt(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new N(i,s,_e(this,o),1),this},t.call=function(i,s,o){return ke(this,N.delayedCall(0,i,s),o)},t.staggerTo=function(i,s,o,a,l,u,c){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=u,o.onCompleteParams=c,o.parent=this,new N(i,o,_e(this,l)),this},t.staggerFrom=function(i,s,o,a,l,u,c){return o.runBackwards=1,Xt(o).immediateRender=re(o.immediateRender),this.staggerTo(i,s,o,a,l,u,c)},t.staggerFromTo=function(i,s,o,a,l,u,c,h){return a.startAt=o,Xt(a).immediateRender=re(a.immediateRender),this.staggerTo(i,s,a,l,u,c,h)},t.render=function(i,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,u=this._dur,c=i<=0?0:z(i),h=this._zTime<0!=i<0&&(this._initted||!u),d,_,p,f,g,y,b,m,w,v,k,T;if(this!==M&&c>l&&i>=0&&(c=l),c!==this._tTime||o||h){if(a!==this._time&&u&&(c+=this._time-a,i+=this._time-a),d=c,w=this._start,m=this._ts,y=!m,h&&(u||(a=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(k=this._yoyo,g=u+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(g*100+i,s,o);if(d=z(c%g),c===l?(f=this._repeat,d=u):(v=z(c/g),f=~~v,f&&f===v&&(d=u,f--),d>u&&(d=u)),v=jt(this._tTime,g),!a&&this._tTime&&v!==f&&this._tTime-v*g-this._dur<=0&&(v=f),k&&f&1&&(d=u-d,T=1),f!==v&&!this._lock){var x=k&&v&1,S=x===(k&&f&1);if(f<v&&(x=!x),a=x?0:c%u?u:c,this._lock=1,this.render(a||(T?0:z(f*g)),s,!u)._lock=0,this._tTime=c,!s&&this.parent&&ce(this,"onRepeat"),this.vars.repeatRefresh&&!T&&(this.invalidate()._lock=1),a&&a!==this._time||y!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,l=this._tDur,S&&(this._lock=2,a=x?u:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!T&&this.invalidate()),this._lock=0,!this._ts&&!y)return this;Wn(this,T)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(b=Hl(this,z(a),z(d)),b&&(c-=d-(d=b._start))),this._tTime=c,this._time=d,this._act=!m,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,a=0),!a&&c&&!s&&!v&&(ce(this,"onStart"),this._tTime!==c))return this;if(d>=a&&i>=0)for(_=this._first;_;){if(p=_._next,(_._act||d>=_._start)&&_._ts&&b!==_){if(_.parent!==this)return this.render(i,s,o);if(_.render(_._ts>0?(d-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(d-_._start)*_._ts,s,o),d!==this._time||!this._ts&&!y){b=0,p&&(c+=this._zTime=-R);break}}_=p}else{_=this._last;for(var O=i<0?i:d;_;){if(p=_._prev,(_._act||O<=_._end)&&_._ts&&b!==_){if(_.parent!==this)return this.render(i,s,o);if(_.render(_._ts>0?(O-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(O-_._start)*_._ts,s,o||Y&&Fi(_)),d!==this._time||!this._ts&&!y){b=0,p&&(c+=this._zTime=O?-R:R);break}}_=p}}if(b&&!s&&(this.pause(),b.render(d>=a?0:-R)._zTime=d>=a?1:-1,this._ts))return this._start=w,qr(this),this.render(i,s,o);this._onUpdate&&!s&&ce(this,"onUpdate",!0),(c===l&&this._tTime>=this.totalDuration()||!c&&a)&&(w===this._start||Math.abs(m)!==Math.abs(this._ts))&&(this._lock||((i||!u)&&(c===l&&this._ts>0||!c&&this._ts<0)&&Ve(this,1),!s&&!(i<0&&!a)&&(c||a||!l)&&(ce(this,c===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var o=this;if($e(s)||(s=_e(this,s,i)),!(i instanceof or)){if(Q(i))return i.forEach(function(a){return o.add(a,s)}),this;if(J(i))return this.addLabel(i,s);if(q(i))i=N.delayedCall(0,i);else return this}return this!==i?ke(this,i,s):this},t.getChildren=function(i,s,o,a){i===void 0&&(i=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-pe);for(var l=[],u=this._first;u;)u._start>=a&&(u instanceof N?s&&l.push(u):(o&&l.push(u),i&&l.push.apply(l,u.getChildren(!0,s,o)))),u=u._next;return l},t.getById=function(i){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===i)return s[o]},t.remove=function(i){return J(i)?this.removeLabel(i):q(i)?this.killTweensOf(i):(i.parent===this&&Ur(this,i),i===this._recent&&(this._recent=this._last),nt(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=z(ue.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),n.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=_e(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,o){var a=N.delayedCall(0,s||ir,o);return a.data="isPause",this._hasPause=1,ke(this,a,_e(this,i))},t.removePause=function(i){var s=this._first;for(i=_e(this,i);s;)s._start===i&&s.data==="isPause"&&Ve(s),s=s._next},t.killTweensOf=function(i,s,o){for(var a=this.getTweensOf(i,o),l=a.length;l--;)Ue!==a[l]&&a[l].kill(i,s);return this},t.getTweensOf=function(i,s){for(var o=[],a=ge(i),l=this._first,u=$e(s),c;l;)l instanceof N?Fl(l._targets,a)&&(u?(!Ue||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(c=l.getTweensOf(a,s)).length&&o.push.apply(o,c),l=l._next;return o},t.tweenTo=function(i,s){s=s||{};var o=this,a=_e(o,i),l=s,u=l.startAt,c=l.onStart,h=l.onStartParams,d=l.immediateRender,_,p=N.to(o,fe({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale())||R,onStart:function(){if(o.pause(),!_){var g=s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale());p._dur!==g&&Lt(p,g,0,1).render(p._time,!0,!0),_=1}c&&c.apply(p,h||[])}},s));return d?p.render(0):p},t.tweenFromTo=function(i,s,o){return this.tweenTo(s,fe({startAt:{time:_e(this,i)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),Is(this,_e(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),Is(this,_e(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+R)},t.shiftChildren=function(i,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,u;a;)a._start>=o&&(a._start+=i,a._end+=i),a=a._next;if(s)for(u in l)l[u]>=o&&(l[u]+=i);return nt(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return n.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),nt(this)},t.totalDuration=function(i){var s=0,o=this,a=o._last,l=pe,u,c,h;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(h=o.parent;a;)u=a._prev,a._dirty&&a.totalDuration(),c=a._start,c>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,ke(o,a,c-a._delay,1)._lock=0):l=c,c<0&&a._ts&&(s-=c,(!h&&!o._dp||h&&h.smoothChildTiming)&&(o._start+=c/o._ts,o._time-=c,o._tTime-=c),o.shiftChildren(-c,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=u;Lt(o,o===M&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if(M._ts&&(xn(M,Ir(i,M)),Tn=ue.frame),ue.frame>=Es){Es+=he.autoSleep||120;var s=M._first;if((!s||!s._ts)&&he.autoSleep&&ue._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||ue.sleep()}}},e}(or);fe(ee.prototype,{_lock:0,_hasPause:0,_forcing:0});var uu=function(e,t,r,i,s,o,a){var l=new se(this._pt,e,t,0,1,Zn,null,s),u=0,c=0,h,d,_,p,f,g,y,b;for(l.b=r,l.e=i,r+="",i+="",(y=~i.indexOf("random("))&&(i=sr(i)),o&&(b=[r,i],o(b,e,t),r=b[0],i=b[1]),d=r.match(Jr)||[];h=Jr.exec(i);)p=h[0],f=i.substring(u,h.index),_?_=(_+1)%5:f.substr(-5)==="rgba("&&(_=1),p!==d[c++]&&(g=parseFloat(d[c-1])||0,l._pt={_next:l._pt,p:f||c===1?f:",",s:g,c:p.charAt(1)==="="?Et(g,p)-g:parseFloat(p)-g,m:_&&_<4?Math.round:0},u=Jr.lastIndex);return l.c=u<i.length?i.substring(u,i.length):"",l.fp=a,(vn.test(i)||y)&&(l.e=0),this._pt=l,l},Bi=function(e,t,r,i,s,o,a,l,u,c){q(i)&&(i=i(s||0,e,o));var h=e[t],d=r!=="get"?r:q(h)?u?e[t.indexOf("set")||!q(e["get"+t.substr(3)])?t:"get"+t.substr(3)](u):e[t]():h,_=q(h)?u?_u:Xn:zi,p;if(J(i)&&(~i.indexOf("random(")&&(i=sr(i)),i.charAt(1)==="="&&(p=Et(d,i)+(X(d)||0),(p||p===0)&&(i=p))),!c||d!==i||bi)return!isNaN(d*i)&&i!==""?(p=new se(this._pt,e,t,+d||0,i-(d||0),typeof h=="boolean"?gu:Qn,0,_),u&&(p.fp=u),a&&p.modifier(a,this,e),this._pt=p):(!h&&!(t in e)&&Di(t,i),uu.call(this,e,t,d,i,_,l||he.stringFilter,u))},cu=function(e,t,r,i,s){if(q(e)&&(e=Zt(e,s,t,r,i)),!xe(e)||e.style&&e.nodeType||Q(e)||gn(e))return J(e)?Zt(e,s,t,r,i):e;var o={},a;for(a in e)o[a]=Zt(e[a],s,t,r,i);return o},Jn=function(e,t,r,i,s,o){var a,l,u,c;if(le[e]&&(a=new le[e]).init(s,a.rawVars?t[e]:cu(t[e],i,s,o,r),r,i,o)!==!1&&(r._pt=l=new se(r._pt,s,e,0,1,a.render,a,0,a.priority),r!==Ct))for(u=r._ptLookup[r._targets.indexOf(s)],c=a._props.length;c--;)u[a._props[c]]=l;return a},Ue,bi,Ni=function n(e,t,r){var i=e.vars,s=i.ease,o=i.startAt,a=i.immediateRender,l=i.lazy,u=i.onUpdate,c=i.runBackwards,h=i.yoyoEase,d=i.keyframes,_=i.autoRevert,p=e._dur,f=e._startAt,g=e._targets,y=e.parent,b=y&&y.data==="nested"?y.vars.targets:g,m=e._overwrite==="auto"&&!Ii,w=e.timeline,v,k,T,x,S,O,L,I,$,K,V,B,W;if(w&&(!d||!s)&&(s="none"),e._ease=ot(s,It.ease),e._yEase=h?Vn(ot(h===!0?s:h,It.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!w&&!!i.runBackwards,!w||d&&!i.stagger){if(I=g[0]?st(g[0]).harness:0,B=I&&i[I.prop],v=Rr(i,Mi),f&&(f._zTime<0&&f.progress(1),t<0&&c&&a&&!_?f.render(-1,!0):f.revert(c&&p?br:Ul),f._lazy=0),o){if(Ve(e._startAt=N.set(g,fe({data:"isStart",overwrite:!1,parent:y,immediateRender:!0,lazy:!f&&re(l),startAt:null,delay:0,onUpdate:u&&function(){return ce(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Y||!a&&!_)&&e._startAt.revert(br),a&&p&&t<=0&&r<=0){t&&(e._zTime=t);return}}else if(c&&p&&!f){if(t&&(a=!1),T=fe({overwrite:!1,data:"isFromStart",lazy:a&&!f&&re(l),immediateRender:a,stagger:0,parent:y},v),B&&(T[I.prop]=B),Ve(e._startAt=N.set(g,T)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Y?e._startAt.revert(br):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,R,R);else if(!t)return}for(e._pt=e._ptCache=0,l=p&&re(l)||l&&!p,k=0;k<g.length;k++){if(S=g[k],L=S._gsap||qi(g)[k]._gsap,e._ptLookup[k]=K={},pi[L.id]&&Ne.length&&Ar(),V=b===g?k:b.indexOf(S),I&&($=new I).init(S,B||v,e,V,b)!==!1&&(e._pt=x=new se(e._pt,S,$.name,0,1,$.render,$,0,$.priority),$._props.forEach(function(ve){K[ve]=x}),$.priority&&(O=1)),!I||B)for(T in v)le[T]&&($=Jn(T,v,e,V,S,b))?$.priority&&(O=1):K[T]=x=Bi.call(e,S,T,"get",v[T],V,b,0,i.stringFilter);e._op&&e._op[k]&&e.kill(S,e._op[k]),m&&e._pt&&(Ue=e,M.killTweensOf(S,K,e.globalTime(t)),W=!e.parent,Ue=0),e._pt&&l&&(pi[L.id]=1)}O&&eo(e),e._onInit&&e._onInit(e)}e._onUpdate=u,e._initted=(!e._op||e._pt)&&!W,d&&t<=0&&w.render(pe,!0,!0)},hu=function(e,t,r,i,s,o,a,l){var u=(e._pt&&e._ptCache||(e._ptCache={}))[t],c,h,d,_;if(!u)for(u=e._ptCache[t]=[],d=e._ptLookup,_=e._targets.length;_--;){if(c=d[_][t],c&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==t&&c.fp!==t;)c=c._next;if(!c)return bi=1,e.vars[t]="+=0",Ni(e,a),bi=0,l?rr(t+" not eligible for reset"):1;u.push(c)}for(_=u.length;_--;)h=u[_],c=h._pt||h,c.s=(i||i===0)&&!s?i:c.s+(i||0)+o*c.c,c.c=r-c.s,h.e&&(h.e=F(r)+X(h.e)),h.b&&(h.b=c.s+X(h.b))},du=function(e,t){var r=e[0]?st(e[0]).harness:0,i=r&&r.aliases,s,o,a,l;if(!i)return t;s=$t({},t);for(o in i)if(o in s)for(l=i[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},fu=function(e,t,r,i){var s=t.ease||i||"power1.inOut",o,a;if(Q(t))a=r[e]||(r[e]=[]),t.forEach(function(l,u){return a.push({t:u/(t.length-1)*100,v:l,e:s})});else for(o in t)a=r[o]||(r[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},Zt=function(e,t,r,i,s){return q(e)?e.call(t,r,i,s):J(e)&&~e.indexOf("random(")?sr(e):e},Kn=Ui+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Yn={};ie(Kn+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return Yn[n]=1});var N=function(n){_n(e,n);function e(r,i,s,o){var a;typeof i=="number"&&(s.duration=i,i=s,s=null),a=n.call(this,o?i:Xt(i))||this;var l=a.vars,u=l.duration,c=l.delay,h=l.immediateRender,d=l.stagger,_=l.overwrite,p=l.keyframes,f=l.defaults,g=l.scrollTrigger,y=l.yoyoEase,b=i.parent||M,m=(Q(r)||gn(r)?$e(r[0]):"length"in i)?[r]:ge(r),w,v,k,T,x,S,O,L;if(a._targets=m.length?qi(m):rr("GSAP target "+r+" not found. https://gsap.com",!he.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=_,p||d||yr(u)||yr(c)){if(i=a.vars,w=a.timeline=new ee({data:"nested",defaults:f||{},targets:b&&b.data==="nested"?b.vars.targets:m}),w.kill(),w.parent=w._dp=Oe(a),w._start=0,d||yr(u)||yr(c)){if(T=m.length,O=d&&jn(d),xe(d))for(x in d)~Kn.indexOf(x)&&(L||(L={}),L[x]=d[x]);for(v=0;v<T;v++)k=Rr(i,Yn),k.stagger=0,y&&(k.yoyoEase=y),L&&$t(k,L),S=m[v],k.duration=+Zt(u,Oe(a),v,S,m),k.delay=(+Zt(c,Oe(a),v,S,m)||0)-a._delay,!d&&T===1&&k.delay&&(a._delay=c=k.delay,a._start+=c,k.delay=0),w.to(S,k,O?O(v,S,m):0),w._ease=E.none;w.duration()?u=c=0:a.timeline=0}else if(p){Xt(fe(w.vars.defaults,{ease:"none"})),w._ease=ot(p.ease||i.ease||"none");var I=0,$,K,V;if(Q(p))p.forEach(function(B){return w.to(m,B,">")}),w.duration();else{k={};for(x in p)x==="ease"||x==="easeEach"||fu(x,p[x],k,p.easeEach);for(x in k)for($=k[x].sort(function(B,W){return B.t-W.t}),I=0,v=0;v<$.length;v++)K=$[v],V={ease:K.e,duration:(K.t-(v?$[v-1].t:0))/100*u},V[x]=K.v,w.to(m,V,I),I+=V.duration;w.duration()<u&&w.to({},{duration:u-w.duration()})}}u||a.duration(u=w.duration())}else a.timeline=0;return _===!0&&!Ii&&(Ue=Oe(a),M.killTweensOf(m),Ue=0),ke(b,Oe(a),s),i.reversed&&a.reverse(),i.paused&&a.paused(!0),(h||!u&&!p&&a._start===z(b._time)&&re(h)&&Vl(Oe(a))&&b.data!=="nested")&&(a._tTime=-R,a.render(Math.max(0,-c)||0)),g&&An(Oe(a),g),a}var t=e.prototype;return t.render=function(i,s,o){var a=this._time,l=this._tDur,u=this._dur,c=i<0,h=i>l-R&&!c?l:i<R?0:i,d,_,p,f,g,y,b,m,w;if(!u)Gl(this,i,s,o);else if(h!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c||this._lazy){if(d=h,m=this.timeline,this._repeat){if(f=u+this._rDelay,this._repeat<-1&&c)return this.totalTime(f*100+i,s,o);if(d=z(h%f),h===l?(p=this._repeat,d=u):(g=z(h/f),p=~~g,p&&p===g?(d=u,p--):d>u&&(d=u)),y=this._yoyo&&p&1,y&&(w=this._yEase,d=u-d),g=jt(this._tTime,f),d===a&&!o&&this._initted&&p===g)return this._tTime=h,this;p!==g&&(m&&this._yEase&&Wn(m,y),this.vars.repeatRefresh&&!y&&!this._lock&&d!==f&&this._initted&&(this._lock=o=1,this.render(z(f*p),!0).invalidate()._lock=0))}if(!this._initted){if(Rn(this,c?i:d,o,s,h))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&p!==g))return this;if(u!==this._dur)return this.render(i,s,o)}if(this._tTime=h,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=b=(w||this._ease)(d/u),this._from&&(this.ratio=b=1-b),!a&&h&&!s&&!g&&(ce(this,"onStart"),this._tTime!==h))return this;for(_=this._pt;_;)_.r(b,_.d),_=_._next;m&&m.render(i<0?i:m._dur*m._ease(d/this._dur),s,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(c&&gi(this,i,s,o),ce(this,"onUpdate")),this._repeat&&p!==g&&this.vars.onRepeat&&!s&&this.parent&&ce(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(c&&!this._onUpdate&&gi(this,i,!0,!0),(i||!u)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&Ve(this,1),!s&&!(c&&!a)&&(h||a||y)&&(ce(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),n.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,o,a,l){nr||ue.wake(),this._ts||this.play();var u=Math.min(this._dur,(this._dp._time-this._start)*this._ts),c;return this._initted||Ni(this,u),c=this._ease(u/this._dur),hu(this,i,s,o,a,c,u,l)?this.resetTo(i,s,o,a,1):(Fr(this,0),this.parent||En(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Wt(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Y),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,Ue&&Ue.vars.overwrite!==!0)._first||Wt(this),this.parent&&o!==this.timeline.totalDuration()&&Lt(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=i?ge(i):a,u=this._ptLookup,c=this._pt,h,d,_,p,f,g,y;if((!s||s==="all")&&Nl(a,l))return s==="all"&&(this._pt=0),Wt(this);for(h=this._op=this._op||[],s!=="all"&&(J(s)&&(f={},ie(s,function(b){return f[b]=1}),s=f),s=du(a,s)),y=a.length;y--;)if(~l.indexOf(a[y])){d=u[y],s==="all"?(h[y]=s,p=d,_={}):(_=h[y]=h[y]||{},p=s);for(f in p)g=d&&d[f],g&&((!("kill"in g.d)||g.d.kill(f)===!0)&&Ur(this,g,"_pt"),delete d[f]),_!=="all"&&(_[f]=1)}return this._initted&&!this._pt&&c&&Wt(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return Qt(1,arguments)},e.delayedCall=function(i,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(i,s,o){return Qt(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,o){return M.killTweensOf(i,s,o)},e}(or);fe(N.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});ie("staggerTo,staggerFrom,staggerFromTo",function(n){N[n]=function(){var e=new ee,t=vi.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var zi=function(e,t,r){return e[t]=r},Xn=function(e,t,r){return e[t](r)},_u=function(e,t,r,i){return e[t](i.fp,r)},pu=function(e,t,r){return e.setAttribute(t,r)},Vi=function(e,t){return q(e[t])?Xn:$i(e[t])&&e.setAttribute?pu:zi},Qn=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},gu=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Zn=function(e,t){var r=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+i,r=r._next;i+=t.c}t.set(t.t,t.p,i,t)},Wi=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},mu=function(e,t,r,i){for(var s=this._pt,o;s;)o=s._next,s.p===i&&s.modifier(e,t,r),s=o},vu=function(e){for(var t=this._pt,r,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?Ur(this,t,"_pt"):t.dep||(r=1),t=i;return!r},yu=function(e,t,r,i){i.mSet(e,t,i.m.call(i.tween,r,i.mt),i)},eo=function(e){for(var t=e._pt,r,i,s,o;t;){for(r=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:o)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:o=t,t=r}e._pt=s},se=function(){function n(t,r,i,s,o,a,l,u,c){this.t=r,this.s=s,this.c=o,this.p=i,this.r=a||Qn,this.d=l||this,this.set=u||zi,this.pr=c||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=yu,this.m=r,this.mt=s,this.tween=i},n}();ie(Ui+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return Mi[n]=1});de.TweenMax=de.TweenLite=N;de.TimelineLite=de.TimelineMax=ee;M=new ee({sortChildren:!1,defaults:It,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});he.stringFilter=zn;var at=[],Tr={},wu=[],js=0,bu=0,Zr=function(e){return(Tr[e]||wu).map(function(t){return t()})},ki=function(){var e=Date.now(),t=[];e-js>2&&(Zr("matchMediaInit"),at.forEach(function(r){var i=r.queries,s=r.conditions,o,a,l,u;for(a in i)o=be.matchMedia(i[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,u=1);u&&(r.revert(),l&&t.push(r))}),Zr("matchMediaRevert"),t.forEach(function(r){return r.onMatch(r,function(i){return r.add(null,i)})}),js=e,Zr("matchMedia"))},to=function(){function n(t,r){this.selector=r&&yi(r),this.data=[],this._r=[],this.isReverted=!1,this.id=bu++,t&&this.add(t)}var e=n.prototype;return e.add=function(r,i,s){q(r)&&(s=i,i=r,r=q);var o=this,a=function(){var u=D,c=o.selector,h;return u&&u!==o&&u.data.push(o),s&&(o.selector=yi(s)),D=o,h=i.apply(o,arguments),q(h)&&o._r.push(h),D=u,o.selector=c,o.isReverted=!1,h};return o.last=a,r===q?a(o,function(l){return o.add(null,l)}):r?o[r]=a:a},e.ignore=function(r){var i=D;D=null,r(this),D=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof n?r.push.apply(r,i.getTweens()):i instanceof N&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r?function(){for(var a=s.getTweens(),l=s.data.length,u;l--;)u=s.data[l],u.data==="isFlip"&&(u.revert(),u.getChildren(!0,!0,!1).forEach(function(c){return a.splice(a.indexOf(c),1)}));for(a.map(function(c){return{g:c._dur||c._delay||c._sat&&!c._sat.vars.immediateRender?c.globalTime(0):-1/0,t:c}}).sort(function(c,h){return h.g-c.g||-1/0}).forEach(function(c){return c.t.revert(r)}),l=s.data.length;l--;)u=s.data[l],u instanceof ee?u.data!=="nested"&&(u.scrollTrigger&&u.scrollTrigger.revert(),u.kill()):!(u instanceof N)&&u.revert&&u.revert(r);s._r.forEach(function(c){return c(r,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),i)for(var o=at.length;o--;)at[o].id===this.id&&at.splice(o,1)},e.revert=function(r){this.kill(r||{})},n}(),ku=function(){function n(t){this.contexts=[],this.scope=t,D&&D.data.push(this)}var e=n.prototype;return e.add=function(r,i,s){xe(r)||(r={matches:r});var o=new to(0,s||this.scope),a=o.conditions={},l,u,c;D&&!o.selector&&(o.selector=D.selector),this.contexts.push(o),i=o.add("onMatch",i),o.queries=r;for(u in r)u==="all"?c=1:(l=be.matchMedia(r[u]),l&&(at.indexOf(o)<0&&at.push(o),(a[u]=l.matches)&&(c=1),l.addListener?l.addListener(ki):l.addEventListener("change",ki)));return c&&i(o,function(h){return o.add(null,h)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},n}(),$r={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(i){return Fn(i)})},timeline:function(e){return new ee(e)},getTweensOf:function(e,t){return M.getTweensOf(e,t)},getProperty:function(e,t,r,i){J(e)&&(e=ge(e)[0]);var s=st(e||{}).get,o=r?Pn:Cn;return r==="native"&&(r=""),e&&(t?o((le[t]&&le[t].get||s)(e,t,r,i)):function(a,l,u){return o((le[a]&&le[a].get||s)(e,a,l,u))})},quickSetter:function(e,t,r){if(e=ge(e),e.length>1){var i=e.map(function(c){return oe.quickSetter(c,t,r)}),s=i.length;return function(c){for(var h=s;h--;)i[h](c)}}e=e[0]||{};var o=le[t],a=st(e),l=a.harness&&(a.harness.aliases||{})[t]||t,u=o?function(c){var h=new o;Ct._pt=0,h.init(e,r?c+r:c,Ct,0,[e]),h.render(1,h),Ct._pt&&Wi(1,Ct)}:a.set(e,l);return o?u:function(c){return u(e,l,r?c+r:c,a,1)}},quickTo:function(e,t,r){var i,s=oe.to(e,fe((i={},i[t]="+=0.1",i.paused=!0,i.stagger=0,i),r||{})),o=function(l,u,c){return s.resetTo(t,l,u,c)};return o.tween=s,o},isTweening:function(e){return M.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=ot(e.ease,It.ease)),Os(It,e||{})},config:function(e){return Os(he,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,i=e.plugins,s=e.defaults,o=e.extendTimeline;(i||"").split(",").forEach(function(a){return a&&!le[a]&&!de[a]&&rr(t+" effect requires "+a+" plugin.")}),Kr[t]=function(a,l,u){return r(ge(a),fe(l||{},s),u)},o&&(ee.prototype[t]=function(a,l,u){return this.add(Kr[t](a,xe(l)?l:(u=l)&&{},this),u)})},registerEase:function(e,t){E[e]=ot(t)},parseEase:function(e,t){return arguments.length?ot(e,t):E},getById:function(e){return M.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var r=new ee(e),i,s;for(r.smoothChildTiming=re(e.smoothChildTiming),M.remove(r),r._dp=0,r._time=r._tTime=M._time,i=M._first;i;)s=i._next,(t||!(!i._dur&&i instanceof N&&i.vars.onComplete===i._targets[0]))&&ke(r,i,i._start-i._delay),i=s;return ke(M,r,0),r},context:function(e,t){return e?new to(e,t):D},matchMedia:function(e){return new ku(e)},matchMediaRefresh:function(){return at.forEach(function(e){var t=e.conditions,r,i;for(i in t)t[i]&&(t[i]=!1,r=1);r&&e.revert()})||ki()},addEventListener:function(e,t){var r=Tr[e]||(Tr[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=Tr[e],i=r&&r.indexOf(t);i>=0&&r.splice(i,1)},utils:{wrap:eu,wrapYoyo:tu,distribute:jn,random:Dn,snap:Ln,normalize:Zl,getUnit:X,clamp:Kl,splitColor:Bn,toArray:ge,selector:yi,mapRange:Un,pipe:Xl,unitize:Ql,interpolate:ru,shuffle:$n},install:bn,effects:Kr,ticker:ue,updateRoot:ee.updateRoot,plugins:le,globalTimeline:M,core:{PropTween:se,globals:kn,Tween:N,Timeline:ee,Animation:or,getCache:st,_removeLinkedListItem:Ur,reverting:function(){return Y},context:function(e){return e&&D&&(D.data.push(e),e._ctx=D),D},suppressOverwrites:function(e){return Ii=e}}};ie("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return $r[n]=N[n]});ue.add(ee.updateRoot);Ct=$r.to({},{duration:0});var Tu=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},Su=function(e,t){var r=e._targets,i,s,o;for(i in t)for(s=r.length;s--;)o=e._ptLookup[s][i],o&&(o=o.d)&&(o._pt&&(o=Tu(o,i)),o&&o.modifier&&o.modifier(t[i],e,r[s],i))},ei=function(e,t){return{name:e,headless:1,rawVars:1,init:function(i,s,o){o._onInit=function(a){var l,u;if(J(s)&&(l={},ie(s,function(c){return l[c]=1}),s=l),t){l={};for(u in s)l[u]=t(s[u]);s=l}Su(a,s)}}}},oe=$r.registerPlugin({name:"attr",init:function(e,t,r,i,s){var o,a,l;this.tween=r;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],i,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var r=t._pt;r;)Y?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",headless:1,init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},ei("roundProps",wi),ei("modifiers"),ei("snap",Ln))||$r;N.version=ee.version=oe.version="3.13.0";wn=1;ji()&&Dt();E.Power0;E.Power1;E.Power2;E.Power3;E.Power4;E.Linear;E.Quad;E.Cubic;E.Quart;E.Quint;E.Strong;E.Elastic;E.Back;E.SteppedEase;E.Bounce;E.Sine;E.Expo;E.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Ls,qe,Ot,Gi,it,Ds,Hi,xu=function(){return typeof window<"u"},je={},tt=180/Math.PI,At=Math.PI/180,kt=Math.atan2,Ms=1e8,Ji=/([A-Z])/g,Cu=/(left|right|width|margin|padding|x)/i,Pu=/[\s,\(]\S/,Se={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Ti=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Eu=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Ou=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},Au=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},ro=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},io=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},Ru=function(e,t,r){return e.style[t]=r},Iu=function(e,t,r){return e.style.setProperty(t,r)},$u=function(e,t,r){return e._gsap[t]=r},ju=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},Lu=function(e,t,r,i,s){var o=e._gsap;o.scaleX=o.scaleY=r,o.renderTransform(s,o)},Du=function(e,t,r,i,s){var o=e._gsap;o[t]=r,o.renderTransform(s,o)},U="transform",ne=U+"Origin",Mu=function n(e,t){var r=this,i=this.target,s=i.style,o=i._gsap;if(e in je&&s){if(this.tfm=this.tfm||{},e!=="transform")e=Se[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return r.tfm[a]=Ae(i,a)}):this.tfm[e]=o.x?o[e]:Ae(i,e),e===ne&&(this.tfm.zOrigin=o.zOrigin);else return Se.transform.split(",").forEach(function(a){return n.call(r,a,t)});if(this.props.indexOf(U)>=0)return;o.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(ne,t,"")),e=U}(s||t)&&this.props.push(e,t,s[e])},so=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Uu=function(){var e=this.props,t=this.target,r=t.style,i=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(Ji,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=Hi(),(!s||!s.isStart)&&!r[U]&&(so(r),i.zOrigin&&r[ne]&&(r[ne]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},no=function(e,t){var r={target:e,props:[],revert:Uu,save:Mu};return e._gsap||oe.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(i){return r.save(i)}),r},oo,Si=function(e,t){var r=qe.createElementNS?qe.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):qe.createElement(e);return r&&r.style?r:qe.createElement(e)},me=function n(e,t,r){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(Ji,"-$1").toLowerCase())||i.getPropertyValue(t)||!r&&n(e,Mt(t)||t,1)||""},Us="O,Moz,ms,Ms,Webkit".split(","),Mt=function(e,t,r){var i=t||it,s=i.style,o=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(Us[o]+e in s););return o<0?null:(o===3?"ms":o>=0?Us[o]:"")+e},xi=function(){xu()&&window.document&&(Ls=window,qe=Ls.document,Ot=qe.documentElement,it=Si("div")||{style:{}},Si("div"),U=Mt(U),ne=U+"Origin",it.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",oo=!!Mt("perspective"),Hi=oe.core.reverting,Gi=1)},qs=function(e){var t=e.ownerSVGElement,r=Si("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0),s;i.style.display="block",r.appendChild(i),Ot.appendChild(r);try{s=i.getBBox()}catch{}return r.removeChild(i),Ot.removeChild(r),s},Fs=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},ao=function(e){var t,r;try{t=e.getBBox()}catch{t=qs(e),r=1}return t&&(t.width||t.height)||r||(t=qs(e)),t&&!t.width&&!t.x&&!t.y?{x:+Fs(e,["x","cx","x1"])||0,y:+Fs(e,["y","cy","y1"])||0,width:0,height:0}:t},lo=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&ao(e))},ut=function(e,t){if(t){var r=e.style,i;t in je&&t!==ne&&(t=U),r.removeProperty?(i=t.substr(0,2),(i==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),r.removeProperty(i==="--"?t:t.replace(Ji,"-$1").toLowerCase())):r.removeAttribute(t)}},Fe=function(e,t,r,i,s,o){var a=new se(e._pt,t,r,0,1,o?io:ro);return e._pt=a,a.b=i,a.e=s,e._props.push(r),a},Bs={deg:1,rad:1,turn:1},qu={grid:1,flex:1},We=function n(e,t,r,i){var s=parseFloat(r)||0,o=(r+"").trim().substr((s+"").length)||"px",a=it.style,l=Cu.test(t),u=e.tagName.toLowerCase()==="svg",c=(u?"client":"offset")+(l?"Width":"Height"),h=100,d=i==="px",_=i==="%",p,f,g,y;if(i===o||!s||Bs[i]||Bs[o])return s;if(o!=="px"&&!d&&(s=n(e,t,r,"px")),y=e.getCTM&&lo(e),(_||o==="%")&&(je[t]||~t.indexOf("adius")))return p=y?e.getBBox()[l?"width":"height"]:e[c],F(_?s/p*h:s/100*p);if(a[l?"width":"height"]=h+(d?o:i),f=i!=="rem"&&~t.indexOf("adius")||i==="em"&&e.appendChild&&!u?e:e.parentNode,y&&(f=(e.ownerSVGElement||{}).parentNode),(!f||f===qe||!f.appendChild)&&(f=qe.body),g=f._gsap,g&&_&&g.width&&l&&g.time===ue.time&&!g.uncache)return F(s/g.width*h);if(_&&(t==="height"||t==="width")){var b=e.style[t];e.style[t]=h+i,p=e[c],b?e.style[t]=b:ut(e,t)}else(_||o==="%")&&!qu[me(f,"display")]&&(a.position=me(e,"position")),f===e&&(a.position="static"),f.appendChild(it),p=it[c],f.removeChild(it),a.position="absolute";return l&&_&&(g=st(f),g.time=ue.time,g.width=f[c]),F(d?p*s/h:p&&s?h/p*s:0)},Ae=function(e,t,r,i){var s;return Gi||xi(),t in Se&&t!=="transform"&&(t=Se[t],~t.indexOf(",")&&(t=t.split(",")[0])),je[t]&&t!=="transform"?(s=lr(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:Lr(me(e,ne))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=jr[t]&&jr[t](e,t,r)||me(e,t)||Sn(e,t)||(t==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?We(e,t,s,r)+r:s},Fu=function(e,t,r,i){if(!r||r==="none"){var s=Mt(t,e,1),o=s&&me(e,s,1);o&&o!==r?(t=s,r=o):t==="borderColor"&&(r=me(e,"borderTopColor"))}var a=new se(this._pt,e.style,t,0,1,Zn),l=0,u=0,c,h,d,_,p,f,g,y,b,m,w,v;if(a.b=r,a.e=i,r+="",i+="",i.substring(0,6)==="var(--"&&(i=me(e,i.substring(4,i.indexOf(")")))),i==="auto"&&(f=e.style[t],e.style[t]=i,i=me(e,t)||i,f?e.style[t]=f:ut(e,t)),c=[r,i],zn(c),r=c[0],i=c[1],d=r.match(xt)||[],v=i.match(xt)||[],v.length){for(;h=xt.exec(i);)g=h[0],b=i.substring(l,h.index),p?p=(p+1)%5:(b.substr(-5)==="rgba("||b.substr(-5)==="hsla(")&&(p=1),g!==(f=d[u++]||"")&&(_=parseFloat(f)||0,w=f.substr((_+"").length),g.charAt(1)==="="&&(g=Et(_,g)+w),y=parseFloat(g),m=g.substr((y+"").length),l=xt.lastIndex-m.length,m||(m=m||he.units[t]||w,l===i.length&&(i+=m,a.e+=m)),w!==m&&(_=We(e,t,f,m)||0),a._pt={_next:a._pt,p:b||u===1?b:",",s:_,c:y-_,m:p&&p<4||t==="zIndex"?Math.round:0});a.c=l<i.length?i.substring(l,i.length):""}else a.r=t==="display"&&i==="none"?io:ro;return vn.test(i)&&(a.e=0),this._pt=a,a},Ns={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Bu=function(e){var t=e.split(" "),r=t[0],i=t[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(e=r,r=i,i=e),t[0]=Ns[r]||r,t[1]=Ns[i]||i,t.join(" ")},Nu=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r=t.t,i=r.style,s=t.u,o=r._gsap,a,l,u;if(s==="all"||s===!0)i.cssText="",l=1;else for(s=s.split(","),u=s.length;--u>-1;)a=s[u],je[a]&&(l=1,a=a==="transformOrigin"?ne:U),ut(r,a);l&&(ut(r,U),o&&(o.svg&&r.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",lr(r,1),o.uncache=1,so(i)))}},jr={clearProps:function(e,t,r,i,s){if(s.data!=="isFromStart"){var o=e._pt=new se(e._pt,t,r,0,0,Nu);return o.u=i,o.pr=-10,o.tween=s,e._props.push(r),1}}},ar=[1,0,0,1,0,0],uo={},co=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},zs=function(e){var t=me(e,U);return co(t)?ar:t.substr(7).match(mn).map(F)},Ki=function(e,t){var r=e._gsap||st(e),i=e.style,s=zs(e),o,a,l,u;return r.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?ar:s):(s===ar&&!e.offsetParent&&e!==Ot&&!r.svg&&(l=i.display,i.display="block",o=e.parentNode,(!o||!e.offsetParent&&!e.getBoundingClientRect().width)&&(u=1,a=e.nextElementSibling,Ot.appendChild(e)),s=zs(e),l?i.display=l:ut(e,"display"),u&&(a?o.insertBefore(e,a):o?o.appendChild(e):Ot.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},Ci=function(e,t,r,i,s,o){var a=e._gsap,l=s||Ki(e,!0),u=a.xOrigin||0,c=a.yOrigin||0,h=a.xOffset||0,d=a.yOffset||0,_=l[0],p=l[1],f=l[2],g=l[3],y=l[4],b=l[5],m=t.split(" "),w=parseFloat(m[0])||0,v=parseFloat(m[1])||0,k,T,x,S;r?l!==ar&&(T=_*g-p*f)&&(x=w*(g/T)+v*(-f/T)+(f*b-g*y)/T,S=w*(-p/T)+v*(_/T)-(_*b-p*y)/T,w=x,v=S):(k=ao(e),w=k.x+(~m[0].indexOf("%")?w/100*k.width:w),v=k.y+(~(m[1]||m[0]).indexOf("%")?v/100*k.height:v)),i||i!==!1&&a.smooth?(y=w-u,b=v-c,a.xOffset=h+(y*_+b*f)-y,a.yOffset=d+(y*p+b*g)-b):a.xOffset=a.yOffset=0,a.xOrigin=w,a.yOrigin=v,a.smooth=!!i,a.origin=t,a.originIsAbsolute=!!r,e.style[ne]="0px 0px",o&&(Fe(o,a,"xOrigin",u,w),Fe(o,a,"yOrigin",c,v),Fe(o,a,"xOffset",h,a.xOffset),Fe(o,a,"yOffset",d,a.yOffset)),e.setAttribute("data-svg-origin",w+" "+v)},lr=function(e,t){var r=e._gsap||new Hn(e);if("x"in r&&!t&&!r.uncache)return r;var i=e.style,s=r.scaleX<0,o="px",a="deg",l=getComputedStyle(e),u=me(e,ne)||"0",c,h,d,_,p,f,g,y,b,m,w,v,k,T,x,S,O,L,I,$,K,V,B,W,ve,dr,qt,Ft,Ke,ts,Ce,Ye;return c=h=d=f=g=y=b=m=w=0,_=p=1,r.svg=!!(e.getCTM&&lo(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[U]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[U]!=="none"?l[U]:"")),i.scale=i.rotate=i.translate="none"),T=Ki(e,r.svg),r.svg&&(r.uncache?(ve=e.getBBox(),u=r.xOrigin-ve.x+"px "+(r.yOrigin-ve.y)+"px",W=""):W=!t&&e.getAttribute("data-svg-origin"),Ci(e,W||u,!!W||r.originIsAbsolute,r.smooth!==!1,T)),v=r.xOrigin||0,k=r.yOrigin||0,T!==ar&&(L=T[0],I=T[1],$=T[2],K=T[3],c=V=T[4],h=B=T[5],T.length===6?(_=Math.sqrt(L*L+I*I),p=Math.sqrt(K*K+$*$),f=L||I?kt(I,L)*tt:0,b=$||K?kt($,K)*tt+f:0,b&&(p*=Math.abs(Math.cos(b*At))),r.svg&&(c-=v-(v*L+k*$),h-=k-(v*I+k*K))):(Ye=T[6],ts=T[7],qt=T[8],Ft=T[9],Ke=T[10],Ce=T[11],c=T[12],h=T[13],d=T[14],x=kt(Ye,Ke),g=x*tt,x&&(S=Math.cos(-x),O=Math.sin(-x),W=V*S+qt*O,ve=B*S+Ft*O,dr=Ye*S+Ke*O,qt=V*-O+qt*S,Ft=B*-O+Ft*S,Ke=Ye*-O+Ke*S,Ce=ts*-O+Ce*S,V=W,B=ve,Ye=dr),x=kt(-$,Ke),y=x*tt,x&&(S=Math.cos(-x),O=Math.sin(-x),W=L*S-qt*O,ve=I*S-Ft*O,dr=$*S-Ke*O,Ce=K*O+Ce*S,L=W,I=ve,$=dr),x=kt(I,L),f=x*tt,x&&(S=Math.cos(x),O=Math.sin(x),W=L*S+I*O,ve=V*S+B*O,I=I*S-L*O,B=B*S-V*O,L=W,V=ve),g&&Math.abs(g)+Math.abs(f)>359.9&&(g=f=0,y=180-y),_=F(Math.sqrt(L*L+I*I+$*$)),p=F(Math.sqrt(B*B+Ye*Ye)),x=kt(V,B),b=Math.abs(x)>2e-4?x*tt:0,w=Ce?1/(Ce<0?-Ce:Ce):0),r.svg&&(W=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!co(me(e,U)),W&&e.setAttribute("transform",W))),Math.abs(b)>90&&Math.abs(b)<270&&(s?(_*=-1,b+=f<=0?180:-180,f+=f<=0?180:-180):(p*=-1,b+=b<=0?180:-180)),t=t||r.uncache,r.x=c-((r.xPercent=c&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-c)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+o,r.y=h-((r.yPercent=h&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+o,r.z=d+o,r.scaleX=F(_),r.scaleY=F(p),r.rotation=F(f)+a,r.rotationX=F(g)+a,r.rotationY=F(y)+a,r.skewX=b+a,r.skewY=m+a,r.transformPerspective=w+o,(r.zOrigin=parseFloat(u.split(" ")[2])||!t&&r.zOrigin||0)&&(i[ne]=Lr(u)),r.xOffset=r.yOffset=0,r.force3D=he.force3D,r.renderTransform=r.svg?Vu:oo?ho:zu,r.uncache=0,r},Lr=function(e){return(e=e.split(" "))[0]+" "+e[1]},ti=function(e,t,r){var i=X(t);return F(parseFloat(t)+parseFloat(We(e,"x",r+"px",i)))+i},zu=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,ho(e,t)},Qe="0deg",zt="0px",Ze=") ",ho=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.z,u=r.rotation,c=r.rotationY,h=r.rotationX,d=r.skewX,_=r.skewY,p=r.scaleX,f=r.scaleY,g=r.transformPerspective,y=r.force3D,b=r.target,m=r.zOrigin,w="",v=y==="auto"&&e&&e!==1||y===!0;if(m&&(h!==Qe||c!==Qe)){var k=parseFloat(c)*At,T=Math.sin(k),x=Math.cos(k),S;k=parseFloat(h)*At,S=Math.cos(k),o=ti(b,o,T*S*-m),a=ti(b,a,-Math.sin(k)*-m),l=ti(b,l,x*S*-m+m)}g!==zt&&(w+="perspective("+g+Ze),(i||s)&&(w+="translate("+i+"%, "+s+"%) "),(v||o!==zt||a!==zt||l!==zt)&&(w+=l!==zt||v?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+Ze),u!==Qe&&(w+="rotate("+u+Ze),c!==Qe&&(w+="rotateY("+c+Ze),h!==Qe&&(w+="rotateX("+h+Ze),(d!==Qe||_!==Qe)&&(w+="skew("+d+", "+_+Ze),(p!==1||f!==1)&&(w+="scale("+p+", "+f+Ze),b.style[U]=w||"translate(0, 0)"},Vu=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.rotation,u=r.skewX,c=r.skewY,h=r.scaleX,d=r.scaleY,_=r.target,p=r.xOrigin,f=r.yOrigin,g=r.xOffset,y=r.yOffset,b=r.forceCSS,m=parseFloat(o),w=parseFloat(a),v,k,T,x,S;l=parseFloat(l),u=parseFloat(u),c=parseFloat(c),c&&(c=parseFloat(c),u+=c,l+=c),l||u?(l*=At,u*=At,v=Math.cos(l)*h,k=Math.sin(l)*h,T=Math.sin(l-u)*-d,x=Math.cos(l-u)*d,u&&(c*=At,S=Math.tan(u-c),S=Math.sqrt(1+S*S),T*=S,x*=S,c&&(S=Math.tan(c),S=Math.sqrt(1+S*S),v*=S,k*=S)),v=F(v),k=F(k),T=F(T),x=F(x)):(v=h,x=d,k=T=0),(m&&!~(o+"").indexOf("px")||w&&!~(a+"").indexOf("px"))&&(m=We(_,"x",o,"px"),w=We(_,"y",a,"px")),(p||f||g||y)&&(m=F(m+p-(p*v+f*T)+g),w=F(w+f-(p*k+f*x)+y)),(i||s)&&(S=_.getBBox(),m=F(m+i/100*S.width),w=F(w+s/100*S.height)),S="matrix("+v+","+k+","+T+","+x+","+m+","+w+")",_.setAttribute("transform",S),b&&(_.style[U]=S)},Wu=function(e,t,r,i,s){var o=360,a=J(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?tt:1),u=l-i,c=i+u+"deg",h,d;return a&&(h=s.split("_")[1],h==="short"&&(u%=o,u!==u%(o/2)&&(u+=u<0?o:-o)),h==="cw"&&u<0?u=(u+o*Ms)%o-~~(u/o)*o:h==="ccw"&&u>0&&(u=(u-o*Ms)%o-~~(u/o)*o)),e._pt=d=new se(e._pt,t,r,i,u,Eu),d.e=c,d.u="deg",e._props.push(r),d},Vs=function(e,t){for(var r in t)e[r]=t[r];return e},Gu=function(e,t,r){var i=Vs({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=r.style,a,l,u,c,h,d,_,p;i.svg?(u=r.getAttribute("transform"),r.setAttribute("transform",""),o[U]=t,a=lr(r,1),ut(r,U),r.setAttribute("transform",u)):(u=getComputedStyle(r)[U],o[U]=t,a=lr(r,1),o[U]=u);for(l in je)u=i[l],c=a[l],u!==c&&s.indexOf(l)<0&&(_=X(u),p=X(c),h=_!==p?We(r,l,u,p):parseFloat(u),d=parseFloat(c),e._pt=new se(e._pt,a,l,h,d-h,Ti),e._pt.u=p||0,e._props.push(l));Vs(a,i)};ie("padding,margin,Width,Radius",function(n,e){var t="Top",r="Right",i="Bottom",s="Left",o=(e<3?[t,r,i,s]:[t+s,t+r,i+r,i+s]).map(function(a){return e<2?n+a:"border"+a+n});jr[e>1?"border"+n:n]=function(a,l,u,c,h){var d,_;if(arguments.length<4)return d=o.map(function(p){return Ae(a,p,u)}),_=d.join(" "),_.split(d[0]).length===5?d[0]:_;d=(c+"").split(" "),_={},o.forEach(function(p,f){return _[p]=d[f]=d[f]||d[(f-1)/2|0]}),a.init(l,_,h)}});var fo={name:"css",register:xi,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,i,s){var o=this._props,a=e.style,l=r.vars.startAt,u,c,h,d,_,p,f,g,y,b,m,w,v,k,T,x;Gi||xi(),this.styles=this.styles||no(e),x=this.styles.props,this.tween=r;for(f in t)if(f!=="autoRound"&&(c=t[f],!(le[f]&&Jn(f,t,r,i,e,s)))){if(_=typeof c,p=jr[f],_==="function"&&(c=c.call(r,i,e,s),_=typeof c),_==="string"&&~c.indexOf("random(")&&(c=sr(c)),p)p(this,e,f,c,r)&&(T=1);else if(f.substr(0,2)==="--")u=(getComputedStyle(e).getPropertyValue(f)+"").trim(),c+="",ze.lastIndex=0,ze.test(u)||(g=X(u),y=X(c)),y?g!==y&&(u=We(e,f,u,y)+y):g&&(c+=g),this.add(a,"setProperty",u,c,i,s,0,0,f),o.push(f),x.push(f,0,a[f]);else if(_!=="undefined"){if(l&&f in l?(u=typeof l[f]=="function"?l[f].call(r,i,e,s):l[f],J(u)&&~u.indexOf("random(")&&(u=sr(u)),X(u+"")||u==="auto"||(u+=he.units[f]||X(Ae(e,f))||""),(u+"").charAt(1)==="="&&(u=Ae(e,f))):u=Ae(e,f),d=parseFloat(u),b=_==="string"&&c.charAt(1)==="="&&c.substr(0,2),b&&(c=c.substr(2)),h=parseFloat(c),f in Se&&(f==="autoAlpha"&&(d===1&&Ae(e,"visibility")==="hidden"&&h&&(d=0),x.push("visibility",0,a.visibility),Fe(this,a,"visibility",d?"inherit":"hidden",h?"inherit":"hidden",!h)),f!=="scale"&&f!=="transform"&&(f=Se[f],~f.indexOf(",")&&(f=f.split(",")[0]))),m=f in je,m){if(this.styles.save(f),_==="string"&&c.substring(0,6)==="var(--"&&(c=me(e,c.substring(4,c.indexOf(")"))),h=parseFloat(c)),w||(v=e._gsap,v.renderTransform&&!t.parseTransform||lr(e,t.parseTransform),k=t.smoothOrigin!==!1&&v.smooth,w=this._pt=new se(this._pt,a,U,0,1,v.renderTransform,v,0,-1),w.dep=1),f==="scale")this._pt=new se(this._pt,v,"scaleY",v.scaleY,(b?Et(v.scaleY,b+h):h)-v.scaleY||0,Ti),this._pt.u=0,o.push("scaleY",f),f+="X";else if(f==="transformOrigin"){x.push(ne,0,a[ne]),c=Bu(c),v.svg?Ci(e,c,0,k,0,this):(y=parseFloat(c.split(" ")[2])||0,y!==v.zOrigin&&Fe(this,v,"zOrigin",v.zOrigin,y),Fe(this,a,f,Lr(u),Lr(c)));continue}else if(f==="svgOrigin"){Ci(e,c,1,k,0,this);continue}else if(f in uo){Wu(this,v,f,d,b?Et(d,b+c):c);continue}else if(f==="smoothOrigin"){Fe(this,v,"smooth",v.smooth,c);continue}else if(f==="force3D"){v[f]=c;continue}else if(f==="transform"){Gu(this,c,e);continue}}else f in a||(f=Mt(f)||f);if(m||(h||h===0)&&(d||d===0)&&!Pu.test(c)&&f in a)g=(u+"").substr((d+"").length),h||(h=0),y=X(c)||(f in he.units?he.units[f]:g),g!==y&&(d=We(e,f,u,y)),this._pt=new se(this._pt,m?v:a,f,d,(b?Et(d,b+h):h)-d,!m&&(y==="px"||f==="zIndex")&&t.autoRound!==!1?Au:Ti),this._pt.u=y||0,g!==y&&y!=="%"&&(this._pt.b=u,this._pt.r=Ou);else if(f in a)Fu.call(this,e,f,u,b?b+c:c);else if(f in e)this.add(e,f,u||e[f],b?b+c:c,i,s);else if(f!=="parseTransform"){Di(f,c);continue}m||(f in a?x.push(f,0,a[f]):typeof e[f]=="function"?x.push(f,2,e[f]()):x.push(f,1,u||e[f])),o.push(f)}}T&&eo(this)},render:function(e,t){if(t.tween._time||!Hi())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:Ae,aliases:Se,getSetter:function(e,t,r){var i=Se[t];return i&&i.indexOf(",")<0&&(t=i),t in je&&t!==ne&&(e._gsap.x||Ae(e,"x"))?r&&Ds===r?t==="scale"?ju:$u:(Ds=r||{})&&(t==="scale"?Lu:Du):e.style&&!$i(e.style[t])?Ru:~t.indexOf("-")?Iu:Vi(e,t)},core:{_removeProperty:ut,_getMatrix:Ki}};oe.utils.checkPrefix=Mt;oe.core.getStyleSaver=no;(function(n,e,t,r){var i=ie(n+","+e+","+t,function(s){je[s]=1});ie(e,function(s){he.units[s]="deg",uo[s]=1}),Se[i[13]]=n+","+e,ie(r,function(s){var o=s.split(":");Se[o[1]]=i[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");ie("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){he.units[n]="px"});oe.registerPlugin(fo);var ct=oe.registerPlugin(fo)||oe;ct.core.Tween;if(typeof AFRAME>"u")throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerShader("chromakey",{schema:{src:{type:"map"},color:{default:{x:.1,y:.9,z:.2},type:"vec3",is:"uniform"},transparent:{default:!0,is:"uniform"}},init:function(n){var e=new THREE.VideoTexture(n.src);e.minFilter=THREE.LinearFilter,this.material=new THREE.ShaderMaterial({uniforms:{color:{type:"c",value:n.color},myTexture:{type:"t",value:e}},vertexShader:this.vertexShader,fragmentShader:this.fragmentShader})},update:function(n){this.material.color=n.color,this.material.src=n.src,this.material.transparent=n.transparent},vertexShader:["varying vec2 vUv;","void main(void)","{","vUv = uv;","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","gl_Position = projectionMatrix * mvPosition;","}"].join(`
`),fragmentShader:["uniform sampler2D myTexture;","uniform vec3 color;","varying vec2 vUv;","void main(void)","{","vec3 tColor = texture2D( myTexture, vUv ).rgb;","float a = (length(tColor - color) - 0.5) * 7.0;","gl_FragColor = vec4(tColor, a);","}"].join(`
`)});let Ie=7,Yi=!1,Be=0,Sr=JSON.parse(localStorage.getItem("completedTasks"))||[],Te=!0,er=!0,Re,xr=!1;const ae="/Integration4/";async function Br(n){const{data:e,error:t}=await fn.from("Locations").select("*");if(t){console.error("Error fetching locations:",t);return}const r=e.find(s=>s.id===n),i=document.getElementById("locations");return i.innerHTML=e.map(s=>`<div>${s.name}: ${s.amount}</div>`).join(""),r}function Ge(n){document.querySelectorAll(".scene").forEach(r=>{r.classList.add("visually-hidden")});const t=document.querySelectorAll(`.${n}`);console.log(n),t.forEach(r=>{r.classList.remove("visually-hidden")})}const _o=document.querySelector(".floor__button--1"),po=document.querySelector(".floor__button--0"),go=document.querySelector(".floor-0"),mo=document.querySelector(".floor-1"),Dr=.5;document.querySelector(".floor__button--1").addEventListener("click",()=>{_o.classList.remove("floor__button--inactive"),po.classList.add("floor__button--inactive"),ct.fromTo(go,{y:0,opacity:1,scale:1},{y:150,opacity:0,scale:.5,duration:Dr,ease:"power1.out"}),ct.fromTo(mo,{y:0,x:-10,opacity:0,scale:1.5},{y:0,x:0,opacity:1,scale:1,duration:Dr,ease:"power1.out"})});document.querySelector(".floor__button--0").addEventListener("click",()=>{_o.classList.add("floor__button--inactive"),po.classList.remove("floor__button--inactive"),ct.fromTo(go,{y:150,opacity:0,scale:.5},{y:0,x:0,scale:1,opacity:1,duration:Dr,ease:"power1.out"}),ct.fromTo(mo,{y:0,opacity:1,scale:1},{y:0,x:-10,opacity:0,scale:1.5,duration:Dr,ease:"power1.out"})});const Ws=document.querySelector(".walking__speech--header"),Gs=document.querySelector(".walking__speech--body"),Hu=()=>{if(Yi===!0){if(Ge("scene-walking"),console.log(Re),Te===!1){const n=Ps.filter(t=>t.location===Re.charAt(0)),e=n[Math.floor(Math.random()*n.length)];console.log(e),Ws.textContent=e.title,Gs.textContent=e.body}if(Re==="G2"){const n=Ps.filter(t=>t.location==="F"),e=n[Math.floor(Math.random()*n.length)];console.log(e),Ws.textContent=e.title,Gs.textContent=e.body}}},Xi=async()=>{let n=await Br(Be);es(),er===!0?(Ge("scene-intro"),document.querySelector("footer").classList.add("visually-hidden"),er=!1,er=localStorage.setItem("isDoingIntro","false")):(Zi(n,1),Ge("scene-game"))},vo=document.querySelectorAll(".task__point"),Ju=async()=>{er=localStorage.getItem("isDoingIntro")??(localStorage.setItem("isDoingIntro","true"),!0),Te=localStorage.getItem("isFirstRound"),Te=Te===null?!0:Te==="true",Te===!0&&vo.forEach(n=>{n.lastElementChild.classList.add("task__icebreaker")}),Ge("scene-map")},yo=async n=>{let e=await Br(Be);Zi(e,-1),er=n,localStorage.setItem("isDoingIntro",n),Ge("scene-map"),document.querySelector("footer").classList.remove("visually-hidden")},wo=()=>{for(let n=0;n<10;n++)Sr.includes(n)&&xo.forEach(e=>{const r=e.id.split("__")[1];Number(r)===n&&e.classList.add("task--complete")});Ie>9&&document.getElementById("task__10").classList.remove("visually-hidden")},Ku=async()=>{Yi=!1;let n=await Br(Be);Zi(n,-1),Te===!0&&(Te=!1,localStorage.setItem("isFirstRound",Te),vo.forEach(t=>{t.lastElementChild.classList.remove("task__icebreaker")})),Ge("scene-map");let e=document.getElementById(`indicator__${Be}`);e.innerHTML="<span>You are<br>here<span>",lt.classList.add("button--inactive"),lt.textContent="Select next task",lt.classList.remove("button--primary"),Sr.includes(Be)||(Sr.push(Be),Ie++,localStorage.setItem("taskProgress",Ie),localStorage.setItem("completedTasks",JSON.stringify(Sr)),bo()),wo(),Ie===11&&Ge("scene-outro")},bo=()=>{Ie=Number(localStorage.getItem("taskProgress"))||1;const n=document.querySelector(".progress__counter"),e=document.querySelectorAll(".progress__bar");for(let t=0;t<10;t++)t<Ie&&e[t].classList.add("progress__bar--filled");n.textContent=Ie};async function Yu(n){document.querySelector(".info__select").classList.add("visually-hidden");const t=n.currentTarget;document.querySelectorAll(".indicator").forEach(l=>{l.classList.remove("indicator--visible")});const i=n.currentTarget.querySelector(".indicator"),o=t.id.split("__")[1];Be=Number(o),lt.classList.remove("button--inactive"),lt.textContent=`Go to task ${Ie}`,lt.classList.add("button--primary"),Yi=!0,Re=t.dataset.location;let a=await Br(Be);i&&(i.offsetWidth,i.classList.add("indicator--visible"),i.innerHTML=`<div class="player__amount">${a.amount}</div><svg width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11.8125 23.625C11.8125 23.625 10.125 23.625 10.125 21.9375C10.125 20.25 11.8125 15.1875 18.5625 15.1875C25.3125 15.1875 27 20.25 27 21.9375C27 23.625 25.3125 23.625 25.3125 23.625H11.8125ZM18.5625 13.5C19.9052 13.5 21.1928 12.9666 22.1422 12.0172C23.0916 11.0678 23.625 9.78016 23.625 8.4375C23.625 7.09484 23.0916 5.80717 22.1422 4.85777C21.1928 3.90837 19.9052 3.375 18.5625 3.375C17.2198 3.375 15.9322 3.90837 14.9828 4.85777C14.0334 5.80717 13.5 7.09484 13.5 8.4375C13.5 9.78016 14.0334 11.0678 14.9828 12.0172C15.9322 12.9666 17.2198 13.5 18.5625 13.5V13.5Z" fill="white"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M8.802 23.6247C8.55184 23.0979 8.42708 22.5203 8.4375 21.9372C8.4375 19.6507 9.585 17.2966 11.7045 15.6597C10.6466 15.3338 9.54441 15.1744 8.4375 15.1872C1.6875 15.1872 0 20.2497 0 21.9372C0 23.6247 1.6875 23.6247 1.6875 23.6247H8.802Z" fill="white"/>
<path d="M7.59375 13.5C8.71263 13.5 9.78569 13.0555 10.5769 12.2644C11.368 11.4732 11.8125 10.4001 11.8125 9.28125C11.8125 8.16237 11.368 7.08931 10.5769 6.29814C9.78569 5.50697 8.71263 5.0625 7.59375 5.0625C6.47487 5.0625 5.40181 5.50697 4.61064 6.29814C3.81947 7.08931 3.375 8.16237 3.375 9.28125C3.375 10.4001 3.81947 11.4732 4.61064 12.2644C5.40181 13.0555 6.47487 13.5 7.59375 13.5V13.5Z" fill="white"/>
</svg>`)}const Qi=n=>{console.log("clicked");const e=document.getElementById("popup"),t=document.querySelector(".popup__icon"),r=document.querySelector(".popup__text");n==="profile"?(t.innerHTML=`<svg width="37" height="37" viewBox="0 0 37 37" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_1070_5858)">
          <path
            d="M24.25 15.5C24.25 16.8924 23.6969 18.2277 22.7123 19.2123C21.7277 20.1969 20.3924 20.75 19 20.75C17.6076 20.75 16.2723 20.1969 15.2877 19.2123C14.3031 18.2277 13.75 16.8924 13.75 15.5C13.75 14.1076 14.3031 12.7723 15.2877 11.7877C16.2723 10.8031 17.6076 10.25 19 10.25C20.3924 10.25 21.7277 10.8031 22.7123 11.7877C23.6969 12.7723 24.25 14.1076 24.25 15.5V15.5Z"
            fill="white" />
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M5 19C5 15.287 6.475 11.726 9.10051 9.10051C11.726 6.475 15.287 5 19 5C22.713 5 26.274 6.475 28.8995 9.10051C31.525 11.726 33 15.287 33 19C33 22.713 31.525 26.274 28.8995 28.8995C26.274 31.525 22.713 33 19 33C15.287 33 11.726 31.525 9.10051 28.8995C6.475 26.274 5 22.713 5 19V19ZM19 6.75C16.6931 6.75012 14.4331 7.40163 12.4802 8.62955C10.5273 9.85746 8.96074 11.6119 7.96094 13.6908C6.96113 15.7698 6.56868 18.0888 6.82875 20.381C7.08882 22.6732 7.99084 24.8454 9.431 26.6475C10.6735 24.6455 13.4088 22.5 19 22.5C24.5912 22.5 27.3248 24.6437 28.569 26.6475C30.0092 24.8454 30.9112 22.6732 31.1713 20.381C31.4313 18.0888 31.0389 15.7698 30.0391 13.6908C29.0393 11.6119 27.4727 9.85746 25.5198 8.62955C23.5669 7.40163 21.3069 6.75012 19 6.75V6.75Z"
            fill="white" />
        </g>
        <defs>
          <clipPath id="clip0_1070_5858">
            <rect width="28" height="28" fill="white" transform="translate(5 5)" />
          </clipPath>
        </defs>
      </svg>`,r.textContent="Profiles will be added in the next update!"):n==="write"?(t.innerHTML=`<svg width="37" height="37" viewBox="0 0 37 37" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g clip-path="url(#clip0_1070_5850)">
            <path
              d="M27.934 7.29196L28.1761 7.04984C28.3583 6.8677 28.5746 6.72324 28.8127 6.62471C29.0508 6.52618 29.3059 6.47551 29.5636 6.47559C29.8212 6.47566 30.0764 6.52648 30.3144 6.62515C30.5524 6.72382 30.7686 6.86841 30.9508 7.05065C31.1329 7.23289 31.2774 7.44922 31.3759 7.68729C31.4744 7.92536 31.5251 8.18051 31.525 8.43816C31.5249 8.69581 31.4741 8.95093 31.3754 9.18894C31.2768 9.42695 31.1322 9.6432 30.95 9.82534L30.7078 10.0658C31.122 10.5304 31.3428 11.1357 31.325 11.7578C31.3072 12.3799 31.0521 12.9717 30.612 13.4117L13.8875 30.1378C13.7829 30.2418 13.652 30.3154 13.5088 30.3507L7.00883 31.9757C6.8728 32.0096 6.73033 32.0077 6.59525 31.9702C6.46018 31.9327 6.3371 31.8609 6.23798 31.7618C6.13885 31.6627 6.06706 31.5396 6.02958 31.4045C5.9921 31.2695 5.9902 31.127 6.02408 30.991L7.64908 24.491C7.68463 24.3484 7.7582 24.2181 7.86195 24.114L23.5302 8.44571C23.3735 8.33542 23.1829 8.28407 22.992 8.30072C22.8011 8.31737 22.6222 8.40096 22.487 8.53671L17.1375 13.8878C17.0619 13.9634 16.9722 14.0233 16.8735 14.0642C16.7748 14.1051 16.669 14.1261 16.5622 14.1261C16.4554 14.1261 16.3496 14.1051 16.2509 14.0642C16.1522 14.0233 16.0625 13.9634 15.987 13.8878C15.9114 13.8123 15.8515 13.7226 15.8106 13.6239C15.7697 13.5252 15.7487 13.4194 15.7487 13.3126C15.7487 13.2058 15.7697 13.1 15.8106 13.0013C15.8515 12.9026 15.9114 12.8129 15.987 12.7373L21.3397 7.38784C21.78 6.94749 22.3722 6.69237 22.9947 6.67484C23.6172 6.65732 24.2228 6.87871 24.6872 7.29359C25.1337 6.89455 25.7114 6.67383 26.3103 6.67353C26.9091 6.67323 27.4871 6.89337 27.934 7.29196V7.29196Z"
              fill="white" />
          </g>
          <defs>
            <clipPath id="clip0_1070_5850">
              <rect width="26" height="26" fill="white" transform="translate(6 6)" />
            </clipPath>
          </defs>
        </svg>`,r.textContent="Adding new activities will be added in the next update!"):n==="bookmark"&&(xr===!1?(Ht.classList.add("bouncy-scale"),Ht.innerHTML=`<svg width="37" height="37" viewBox="0 0 37 37" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M30.0625 34.6875L18.5 25.8285L6.9375 34.6875V2.3125H30.0625V34.6875Z" fill="white"/>
</svg>
`,t.innerHTML=`
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 2.25C6.62391 2.25 2.25 6.62391 2.25 12C2.25 17.3761 6.62391 21.75 12 21.75C17.3761 21.75 21.75 17.3761 21.75 12C21.75 6.62391 17.3761 2.25 12 2.25ZM17.0742 8.73234L10.7742 16.2323C10.7051 16.3147 10.6191 16.3812 10.5221 16.4273C10.425 16.4735 10.3192 16.4983 10.2117 16.5H10.1991C10.0939 16.5 9.99 16.4778 9.89398 16.435C9.79797 16.3922 9.71202 16.3297 9.64172 16.2516L6.94172 13.2516C6.87315 13.1788 6.81981 13.0931 6.78483 12.9995C6.74986 12.9059 6.73395 12.8062 6.73805 12.7063C6.74215 12.6064 6.76617 12.5084 6.8087 12.4179C6.85124 12.3275 6.91142 12.2464 6.98572 12.1796C7.06002 12.1127 7.14694 12.0614 7.24136 12.0286C7.33579 11.9958 7.43581 11.9822 7.53556 11.9886C7.63531 11.995 7.73277 12.0213 7.82222 12.0659C7.91166 12.1106 7.99128 12.1726 8.05641 12.2484L10.1794 14.6072L15.9258 7.76766C16.0547 7.61863 16.237 7.52631 16.4335 7.51066C16.6299 7.49501 16.8246 7.55728 16.9754 7.68402C17.1263 7.81075 17.2212 7.99176 17.2397 8.18793C17.2582 8.3841 17.1988 8.57966 17.0742 8.73234Z" fill="#ffffff"/>
        </svg>
        `,r.textContent="Activity added to your bookmarks!",xr=!0):(Ht.classList.remove("bouncy-scale"),Ht.innerHTML=`<svg width="37" height="37" viewBox="0 0 37 37" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M28.75 4.75V31.7109L19.9121 24.9395L19 24.2402L18.0879 24.9395L9.25 31.7109V4.75H28.75Z"
            stroke="white" stroke-width="3" />
        </svg>`,t.innerHTML=`
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 2.25C6.62391 2.25 2.25 6.62391 2.25 12C2.25 17.3761 6.62391 21.75 12 21.75C17.3761 21.75 21.75 17.3761 21.75 12C21.75 6.62391 17.3761 2.25 12 2.25ZM17.0742 8.73234L10.7742 16.2323C10.7051 16.3147 10.6191 16.3812 10.5221 16.4273C10.425 16.4735 10.3192 16.4983 10.2117 16.5H10.1991C10.0939 16.5 9.99 16.4778 9.89398 16.435C9.79797 16.3922 9.71202 16.3297 9.64172 16.2516L6.94172 13.2516C6.87315 13.1788 6.81981 13.0931 6.78483 12.9995C6.74986 12.9059 6.73395 12.8062 6.73805 12.7063C6.74215 12.6064 6.76617 12.5084 6.8087 12.4179C6.85124 12.3275 6.91142 12.2464 6.98572 12.1796C7.06002 12.1127 7.14694 12.0614 7.24136 12.0286C7.33579 11.9958 7.43581 11.9822 7.53556 11.9886C7.63531 11.995 7.73277 12.0213 7.82222 12.0659C7.91166 12.1106 7.99128 12.1726 8.05641 12.2484L10.1794 14.6072L15.9258 7.76766C16.0547 7.61863 16.237 7.52631 16.4335 7.51066C16.6299 7.49501 16.8246 7.55728 16.9754 7.68402C17.1263 7.81075 17.2212 7.99176 17.2397 8.18793C17.2582 8.3841 17.1988 8.57966 17.0742 8.73234Z" fill="#ffffff"/>
        </svg>
        `,r.textContent="Activity removed from your bookmarks!",xr=!1)),e.classList.remove("hidden"),e.classList.add("show"),setTimeout(()=>{e.classList.remove("show"),setTimeout(()=>{e.classList.add("hidden")},500)},5e3)},Xu=()=>{localStorage.clear()};document.querySelector(".random__ppl").addEventListener("click",Xu);async function Zi(n,e){console.log("name: ",n.name,"amount: ",n.amount);const{error:t}=await fn.from("Locations").update({amount:n.amount+e}).eq("name",n.name);console.log("new amount: ",n.amount)}AFRAME.registerComponent("true-billboard",{tick:function(){const n=document.querySelector("#cam").object3D,e=this.el.object3D,t=new THREE.Vector3;n.getWorldPosition(t);const r=new THREE.Vector3;e.getWorldPosition(r),e.lookAt(t)}});const Qu={A:7,C1:1,C2:1,G1:1,G2:1,L:16,S:6},wr={A:new Set,C1:new Set,C2:new Set,G1:new Set,G2:new Set,L:new Set,S:new Set},Cr=n=>{const e=Qu[n];wr[n].size>=e&&(wr[n]=new Set);let r;do r=Math.floor(Math.random()*e)+1;while(wr[n].has(r));return wr[n].add(r),r},es=()=>{let n=Math.ceil(Ie/2),e=0;if(Re.charAt(0)==="L"||Re.charAt(0)==="A"||Re.charAt(0)==="S"?e=Re.charAt(0):e=Re,xr=!1,e==="L"||e==="A"){const t=Cr(e);St.innerHTML=`
        <a-plane src="${ae}assets/abbies/abby-${n}.png" transparent="true" height="5" width="5" position="-4 0 -4"
        rotation="0 0 0" class="game__task game__task--1"></a-plane>
        <a-plane src="${ae}assets/questions/${e}/${t}.png" transparent="true"  class="game__task game__task--1 visually-hidden" height="4" width="6" position="2 1 -4" rotation="0 0 0" true-billboard></a-plane>
        `,e==="A"&&t===1&&(St.innerHTML=`
            <a-plane src="${ae}assets/questions/${e}/${t}.png" transparent="true"  class="game__task game__task--1 visually-hidden" height="6" width="20" position="0 1 -4.1" rotation="0 0 0" true-billboard></a-plane>
            `)}else if(e==="S"){const t=Cr(e);St.innerHTML=`
        <a-plane src="${ae}assets/abbies/abby-${n}.png" transparent="true" height="5" width="5" position="-6 0 -4"
        rotation="0 0 0" class="game__task game__task--1"></a-plane>
        <a-plane src="${ae}assets/questions/${e}/${t}.jpg" transparent="true"  class="game__task game__task--1 visually-hidden" height="3" width="5" position="0 1 -4" rotation="0 0 0" true-billboard></a-plane>
        <a-plane src="${ae}assets/questions/${e}/${t}-1.png" transparent="true"  class="game__task game__task--1 visually-hidden" height="5" width="6" position="6 1 -4" rotation="0 0 0" true-billboard></a-plane>
        `}else{const t=Cr(e);St.innerHTML=`
        <a-plane src="${ae}assets/abbies/abby-${n}.png" transparent="true" height="5" width="5" position="-6 0 -4"
        rotation="0 0 0" class="game__task game__task--1"></a-plane>
        <a-plane src="${ae}assets/questions/${e}/${t}.jpg" transparent="true"  class="game__task game__task--1 visually-hidden" height="4" width="6" position="2 1 -4" rotation="0 0 0" true-billboard></a-plane>
        `}Te===!0&&(e="L",St.innerHTML=`
    <a-plane src="${ae}assets/abbies/abby-${n}.png" transparent="true" height="5" width="5" position="-6 0 -4"
        rotation="0 0 0" class="game__task game__task--1"></a-plane>
      <a-plane src="${ae}assets/questions/Intro.png" transparent="true" true-billboard class="game__task game__task--1 visually-hidden" height="4" width="6" position="2 1 -4" rotation="0 0 0" true-billboard></a-plane>
    `),console.log(ae,e)},ko=n=>{console.log(n.currentTarget),sc.classList.toggle("side__panel--invisible"),ic.classList.toggle("side__panel--visible")},To=()=>{console.log("toggling"),nc.classList.toggle("panel__info--hidden"),document.querySelectorAll(".scene").forEach(e=>{e.classList.toggle("fullscreen-overlay"),requestAnimationFrame(()=>{e.classList.toggle("active")})})},So=()=>{document.getElementById("marker").removeEventListener("markerFound",So);const e=document.querySelector(".info__findmarker"),t=document.querySelector(".button__container--minimal");e.classList.add("find__marker--hidden"),setTimeout(()=>{Xi(),t.classList.remove("button__container--hidden")},600)},Zu=()=>{const n=document.querySelector("footer"),e=document.querySelector(".button__container--minimal");n.classList.remove("visually-hidden"),e.classList.add("visually-hidden");const t=Cr("L");St.innerHTML=`
    <a-plane src="${ae}assets/abbies/abby-1.png" transparent="true" height="5" width="5" position="-6 0 -4"
        rotation="0 0 0" class="game__task game__task--1"></a-plane>
        <a-plane src="${ae}assets/questions/L/${t}.png" transparent="true"  class="game__task game__task--1 visually-hidden" height="3" width="5" position="0 1 -4" rotation="0 0 0" true-billboard></a-plane>
    `};let ri=0;const ec=()=>{const n=["ENG","NL","FR"];ri=(ri+1)%n.length;const e=n[ri],t=ct.timeline(),r=document.querySelector(".language"),i=.2,s=40;return t.to(r,{x:s,opacity:0,duration:i,ease:"power2.in",onComplete:()=>{r.textContent=e,ct.set(r,{x:-s})}}),t.to(r,{x:0,opacity:1,duration:i,ease:"power2.out"}),t};window.addEventListener("load",()=>{const n=document.getElementById("loading-screen");n&&(n.classList.add("fade-out"),setTimeout(()=>{n.style.display="none"},500))});const tc=document.querySelector(".side__panel--open"),rc=document.querySelector(".side__panel--close");tc.addEventListener("click",ko);rc.addEventListener("click",ko);const ic=document.querySelector(".side__panel--wrapper"),sc=document.querySelector(".side__panel--toggle"),St=document.querySelector(".ar__marker");document.querySelector(".ar__switch").addEventListener("click",es);const nc=document.querySelector(".panel__info");document.querySelector(".panel__info--close").addEventListener("click",To);const oc=document.querySelectorAll(".button__info");oc.forEach(n=>{n.addEventListener("click",To)});document.getElementById("marker").addEventListener("markerFound",So);document.querySelector(".button__complete").addEventListener("click",Ku);document.querySelector(".button__back").addEventListener("click",Xi);document.querySelector(".button__back--game").addEventListener("click",()=>yo(!1));const xo=document.querySelectorAll(".task__point"),lt=document.querySelector(".button__next__task");lt.addEventListener("click",Hu);document.querySelector(".button__game--walking").addEventListener("click",Xi);document.querySelector(".button__next__intro").addEventListener("click",Zu);document.querySelector(".button__back--intro").addEventListener("click",()=>yo(!0));xo.forEach(n=>{n.addEventListener("click",Yu)});document.querySelector(".button__back--walking").addEventListener("click",()=>Ge("scene-map"));document.querySelector(".button__refresh").addEventListener("click",es);document.querySelector(".button__profile").addEventListener("click",()=>Qi("profile"));document.querySelector(".button__write").addEventListener("click",()=>Qi("write"));const Ht=document.querySelector(".button__bookmark");Ht.addEventListener("click",()=>Qi("bookmark"));document.querySelector(".language").addEventListener("click",()=>ec());const ac=()=>{wo(),Ju(),bo()};ac();
